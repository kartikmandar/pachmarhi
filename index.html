<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pachmarhi Trip Itinerary ‚Äî IISER Bhopal Squad</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
<style>
  :root {
    --forest: #1a3a2a;
    --forest-light: #2d5a3f;
    --moss: #4a7c59;
    --sage: #7fa97f;
    --sand: #f5f0e8;
    --sand-dark: #e8e0d0;
    --amber: #d4913b;
    --amber-light: #e8a94e;
    --rust: #c45a3c;
    --cream: #faf8f4;
    --slate: #3a3a3a;
    --slate-light: #6a6a6a;
    --sky: #5b93b0;
    --night: #1a1e2e;
    --star: #ffd475;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--cream);
    color: var(--slate);
    line-height: 1.65;
    -webkit-font-smoothing: antialiased;
    overflow-wrap: break-word;
    word-wrap: break-word;
    -webkit-text-size-adjust: 100%;
  }

  /* ‚îÄ‚îÄ QUICK LINKS ‚îÄ‚îÄ */
  .quick-links {
    display: flex;
    gap: 12px;
    margin-top: 24px;
    flex-wrap: wrap;
  }

  .quick-links a {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    background: rgba(255,255,255,0.12);
    border: 1px solid rgba(255,255,255,0.25);
    border-radius: 8px;
    color: white;
    text-decoration: none;
    font-size: 0.82rem;
    font-weight: 500;
    transition: background 0.2s, border-color 0.2s;
    backdrop-filter: blur(4px);
  }

  .quick-links a:hover {
    background: rgba(255,255,255,0.22);
    border-color: rgba(255,255,255,0.4);
  }

  .quick-links .link-icon {
    font-size: 1.1rem;
  }

  /* ‚îÄ‚îÄ TRIP TRACKER ‚îÄ‚îÄ */
  .trip-tracker {
    margin-top: 28px;
    padding: 22px 28px;
    background: rgba(0,0,0,0.25);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 14px;
    color: white;
  }
  .tracker-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    font-weight: 500;
    letter-spacing: 2.5px;
    text-transform: uppercase;
    color: var(--star);
    margin-bottom: 6px;
  }
  .tracker-pulse {
    display: inline-block;
    width: 8px; height: 8px;
    background: #34d399;
    border-radius: 50%;
    margin-right: 8px;
    vertical-align: middle;
    animation: pulse-dot 1.4s ease-in-out infinite;
  }
  @keyframes pulse-dot {
    0%, 100% { box-shadow: 0 0 0 0 rgba(52,211,153,0.5); }
    50% { box-shadow: 0 0 0 6px rgba(52,211,153,0); }
  }
  /* Countdown (pre-trip) */
  .tracker-countdown {
    display: flex;
    align-items: baseline;
    gap: 4px;
    margin-top: 8px;
  }
  .countdown-unit {
    text-align: center;
  }
  .countdown-value {
    font-family: 'DM Serif Display', serif;
    font-size: 1.9rem;
    line-height: 1;
    min-width: 48px;
    display: inline-block;
  }
  .countdown-label {
    display: block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.55rem;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    opacity: 0.6;
    margin-top: 4px;
  }
  .countdown-sep {
    font-family: 'DM Serif Display', serif;
    font-size: 1.6rem;
    opacity: 0.4;
    padding: 0 2px;
    align-self: flex-start;
    line-height: 1;
  }
  .tracker-hint {
    margin-top: 12px;
    font-size: 0.82rem;
    opacity: 0.7;
  }
  /* Active state (during trip) */
  .tracker-row {
    display: flex;
    gap: 24px;
    margin-top: 10px;
    align-items: stretch;
  }
  .tracker-now, .tracker-next {
    flex: 1;
  }
  .tracker-now-title, .tracker-next-title {
    font-family: 'DM Serif Display', serif;
    font-size: 1.15rem;
    line-height: 1.3;
    margin-top: 2px;
  }
  .tracker-now-time, .tracker-next-time {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    opacity: 0.6;
    margin-top: 4px;
  }
  .tracker-divider {
    width: 1px;
    background: rgba(255,255,255,0.18);
    align-self: stretch;
  }
  /* Progress bar */
  .tracker-progress {
    margin-top: 16px;
  }
  .tracker-progress-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.62rem;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    opacity: 0.6;
    margin-bottom: 6px;
  }
  .tracker-progress-bar {
    height: 6px;
    background: rgba(255,255,255,0.12);
    border-radius: 3px;
    overflow: hidden;
  }
  .tracker-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--amber), var(--star));
    border-radius: 3px;
    transition: width 0.6s ease;
  }
  /* Post-trip */
  .tracker-done-msg {
    font-family: 'DM Serif Display', serif;
    font-size: 1.3rem;
    margin-top: 4px;
  }
  .tracker-done-sub {
    font-size: 0.85rem;
    opacity: 0.65;
    margin-top: 6px;
  }

  /* Tracker responsive ‚Äî tablet */
  @media (max-width: 900px) {
    .trip-tracker { padding: 18px 22px; margin-top: 22px; }
    .countdown-value { font-size: 1.6rem; min-width: 40px; }
    .countdown-sep { font-size: 1.3rem; }
  }
  /* Tracker responsive ‚Äî mobile */
  @media (max-width: 600px) {
    .trip-tracker { padding: 16px 18px; margin-top: 18px; }
    .tracker-row { flex-direction: column; gap: 14px; }
    .tracker-divider { width: 100%; height: 1px; }
    .countdown-value { font-size: 1.4rem; min-width: 34px; }
    .countdown-sep { font-size: 1.1rem; }
    .tracker-now-title, .tracker-next-title { font-size: 1rem; }
  }
  /* Tracker responsive ‚Äî small mobile */
  @media (max-width: 380px) {
    .trip-tracker { padding: 14px 14px; margin-top: 14px; }
    .countdown-value { font-size: 1.2rem; min-width: 28px; }
    .countdown-sep { font-size: 1rem; }
    .countdown-label { font-size: 0.48rem; }
    .tracker-label { font-size: 0.6rem; }
  }

  /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
  .hero {
    background: linear-gradient(135deg, var(--forest) 0%, var(--forest-light) 40%, var(--moss) 100%);
    color: white;
    padding: 80px 40px 60px;
    position: relative;
    overflow: hidden;
  }

  .hero::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background:
      radial-gradient(1px 1px at 10% 20%, rgba(255,212,117,0.8), transparent),
      radial-gradient(1px 1px at 30% 60%, rgba(255,212,117,0.6), transparent),
      radial-gradient(1.5px 1.5px at 50% 10%, rgba(255,212,117,0.9), transparent),
      radial-gradient(1px 1px at 70% 40%, rgba(255,212,117,0.5), transparent),
      radial-gradient(1px 1px at 90% 70%, rgba(255,212,117,0.7), transparent),
      radial-gradient(1px 1px at 15% 80%, rgba(255,212,117,0.4), transparent),
      radial-gradient(1.5px 1.5px at 85% 15%, rgba(255,212,117,0.8), transparent),
      radial-gradient(1px 1px at 60% 85%, rgba(255,212,117,0.5), transparent),
      radial-gradient(1px 1px at 40% 35%, rgba(255,212,117,0.6), transparent),
      radial-gradient(1px 1px at 25% 45%, rgba(255,212,117,0.3), transparent);
    opacity: 0.4;
    pointer-events: none;
  }

  .hero-content { max-width: 800px; margin: 0 auto; position: relative; z-index: 1; }

  .hero-tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    color: var(--star);
    margin-bottom: 16px;
    opacity: 0.9;
  }

  .hero h1 {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(2.4rem, 5vw, 3.8rem);
    line-height: 1.15;
    margin-bottom: 16px;
    font-weight: 400;
  }

  .hero h1 em {
    font-style: italic;
    color: var(--star);
  }

  .hero-sub {
    font-size: 1.05rem;
    line-height: 1.7;
    color: rgba(255,255,255,0.8);
    max-width: 620px;
  }

  .hero-meta {
    display: flex;
    gap: 28px;
    margin-top: 32px;
    flex-wrap: wrap;
  }

  .hero-meta-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.85rem;
    color: rgba(255,255,255,0.7);
    font-family: 'JetBrains Mono', monospace;
  }

  .hero-meta-item .icon { font-size: 1.1rem; }

  /* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
  .container {
    max-width: 820px;
    margin: 0 auto;
    padding: 0 24px;
  }

  /* ‚îÄ‚îÄ OVERVIEW STRIP ‚îÄ‚îÄ */
  .overview-strip {
    background: var(--sand);
    border-bottom: 1px solid var(--sand-dark);
    padding: 32px 24px;
  }

  .overview-grid {
    max-width: 820px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 20px;
  }

  .overview-card {
    background: white;
    border-radius: 10px;
    padding: 18px 20px;
    border: 1px solid var(--sand-dark);
  }

  .overview-card .label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--slate-light);
    margin-bottom: 6px;
  }

  .overview-card .value {
    font-family: 'DM Serif Display', serif;
    font-size: 1.2rem;
    color: var(--forest);
  }

  .overview-card .detail {
    font-size: 0.8rem;
    color: var(--slate-light);
    margin-top: 2px;
  }

  /* ‚îÄ‚îÄ DAY SECTIONS ‚îÄ‚îÄ */
  .day-section {
    padding: 56px 0 40px;
    border-bottom: 1px solid var(--sand-dark);
  }

  .day-header {
    display: flex;
    align-items: baseline;
    gap: 16px;
    margin-bottom: 8px;
  }

  .day-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: white;
    background: var(--forest);
    padding: 5px 12px;
    border-radius: 20px;
    white-space: nowrap;
  }

  .day-badge.amber { background: var(--amber); }
  .day-badge.rust { background: var(--rust); }
  .day-badge.sky { background: var(--sky); }
  .day-badge.night-badge { background: var(--night); }

  .day-date {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    color: var(--slate-light);
  }

  .day-title {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(1.6rem, 3vw, 2rem);
    color: var(--forest);
    margin-bottom: 20px;
    font-weight: 400;
  }

  .day-subtitle {
    font-size: 0.95rem;
    color: var(--slate-light);
    margin-bottom: 28px;
    max-width: 600px;
  }

  /* ‚îÄ‚îÄ TIMELINE ‚îÄ‚îÄ */
  .timeline {
    position: relative;
    padding-left: 36px;
  }

  .timeline::before {
    content: '';
    position: absolute;
    left: 7px;
    top: 8px;
    bottom: 8px;
    width: 2px;
    background: linear-gradient(to bottom, var(--moss), var(--sand-dark));
    border-radius: 2px;
  }

  .timeline-item {
    position: relative;
    padding-bottom: 28px;
  }

  .timeline-item:last-child { padding-bottom: 0; }

  .timeline-item::before {
    content: '';
    position: absolute;
    left: -29px;
    top: 8px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--moss);
    border: 2px solid var(--cream);
    box-shadow: 0 0 0 2px var(--moss);
  }

  .timeline-item.highlight::before {
    background: var(--amber);
    box-shadow: 0 0 0 2px var(--amber);
    width: 12px;
    height: 12px;
    left: -30px;
    top: 7px;
  }

  .timeline-item.star::before {
    background: var(--star);
    box-shadow: 0 0 0 2px var(--amber), 0 0 8px rgba(212,145,59,0.4);
    width: 12px;
    height: 12px;
    left: -30px;
    top: 7px;
  }

  .time-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.78rem;
    color: var(--amber);
    font-weight: 500;
    margin-bottom: 4px;
  }

  .event-title {
    font-weight: 600;
    font-size: 1.05rem;
    color: var(--forest);
    margin-bottom: 4px;
  }

  .event-desc {
    font-size: 0.9rem;
    color: var(--slate-light);
    line-height: 1.6;
  }

  /* ‚îÄ‚îÄ CALLOUT BOXES ‚îÄ‚îÄ */
  .callout {
    background: white;
    border-radius: 10px;
    padding: 20px 24px;
    margin: 24px 0;
    border-left: 3px solid var(--moss);
  }

  .callout.warning {
    border-left-color: var(--rust);
    background: #fef8f6;
  }

  .callout.amber-box {
    border-left-color: var(--amber);
    background: #fdf9f0;
  }

  .callout.night-box {
    border-left-color: var(--star);
    background: var(--night);
    color: rgba(255,255,255,0.85);
  }

  .callout.night-box .callout-title { color: var(--star); }

  .callout-title {
    font-weight: 600;
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 8px;
    color: var(--forest);
  }

  .callout p {
    font-size: 0.88rem;
    line-height: 1.6;
  }

  /* ‚îÄ‚îÄ COST TABLE ‚îÄ‚îÄ */
  .cost-section {
    background: var(--sand);
    padding: 48px 24px;
    margin-top: 0;
  }

  .cost-table {
    max-width: 820px;
    margin: 0 auto;
  }

  .cost-table h2 {
    font-family: 'DM Serif Display', serif;
    font-size: 1.8rem;
    color: var(--forest);
    margin-bottom: 24px;
    font-weight: 400;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 10px;
    overflow: hidden;
    font-size: 0.88rem;
    border: 1px solid var(--sand-dark);
  }

  thead { background: var(--forest); color: white; }
  th {
    text-align: left;
    padding: 14px 18px;
    font-weight: 500;
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  td {
    padding: 12px 18px;
    border-bottom: 1px solid var(--sand-dark);
  }

  tr:last-child td { border-bottom: none; }

  .total-row {
    background: var(--sand);
    font-weight: 600;
    color: var(--forest);
  }

  .total-row td { border-bottom: none; }

  /* ‚îÄ‚îÄ PACKING / CONTACTS ‚îÄ‚îÄ */
  .info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 24px 0;
  }

  @media (max-width: 600px) {
    .info-grid { grid-template-columns: 1fr; }
  }

  .info-card {
    background: white;
    border: 1px solid var(--sand-dark);
    border-radius: 10px;
    padding: 22px 24px;
  }

  .info-card h3 {
    font-family: 'DM Serif Display', serif;
    font-size: 1.1rem;
    color: var(--forest);
    margin-bottom: 12px;
    font-weight: 400;
  }

  .info-card ul {
    list-style: none;
    padding: 0;
  }

  .info-card li {
    font-size: 0.85rem;
    padding: 4px 0;
    color: var(--slate-light);
    padding-left: 18px;
    position: relative;
  }

  .info-card li::before {
    content: '‚Üí';
    position: absolute;
    left: 0;
    color: var(--moss);
    font-weight: 600;
  }

  /* ‚îÄ‚îÄ HEALTH NOTE ‚îÄ‚îÄ */
  .health-note {
    background: #fef8f6;
    border: 1px solid #f0d0c5;
    border-radius: 10px;
    padding: 22px 24px;
    margin: 24px 0;
  }

  .health-note h3 {
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--rust);
    margin-bottom: 10px;
  }

  .health-note p {
    font-size: 0.88rem;
    line-height: 1.6;
    color: var(--slate-light);
  }

  /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
  .footer {
    background: var(--forest);
    color: rgba(255,255,255,0.6);
    padding: 40px 24px;
    text-align: center;
    font-size: 0.8rem;
  }

  .footer strong { color: var(--star); }

  /* ‚îÄ‚îÄ RESPONSIVE ‚Äî TABLET (601px ‚Äì 900px) ‚îÄ‚îÄ */
  @media (max-width: 900px) {
    .hero { padding: 60px 28px 48px; }
    .hero h1 { font-size: clamp(2rem, 4.5vw, 3rem); }
    .hero-sub { font-size: 0.95rem; }
    .hero-meta { gap: 16px 24px; }
    .hero-meta-item { font-size: 0.78rem; }

    .container { padding: 0 20px; }

    .overview-strip { padding: 28px 20px; }
    .overview-grid { gap: 14px; grid-template-columns: repeat(2, 1fr); }
    .overview-card { padding: 14px 16px; }
    .overview-card .value { font-size: 1.1rem; }

    .day-section { padding: 44px 0 36px; }
    .day-title { font-size: clamp(1.4rem, 3vw, 1.8rem); margin-bottom: 16px; }
    .day-subtitle { font-size: 0.9rem; margin-bottom: 22px; }

    .day-map { height: 380px; }

    .event-title { font-size: 0.98rem; }
    .event-desc { font-size: 0.85rem; }

    .callout { padding: 18px 20px; }
    .callout p { font-size: 0.84rem; }

    .info-grid { gap: 16px; }
    .info-card { padding: 18px 20px; }

    .health-note { padding: 18px 20px; }
    .health-note p { font-size: 0.84rem; }

    .footer { padding: 32px 20px; }

    /* Map labels: slightly smaller on tablet */
    .spot-label { font-size: 11px !important; padding: 3px 8px !important; }
    .spot-label .label-time { font-size: 10px; }
    .numbered-marker { width: 28px; height: 28px; font-size: 12px; border-width: 2.5px; }
    .numbered-marker.star-marker { width: 32px; height: 32px; font-size: 13px; }
  }

  /* ‚îÄ‚îÄ RESPONSIVE ‚Äî MOBILE (‚â§600px) ‚îÄ‚îÄ */
  @media (max-width: 600px) {
    .hero { padding: 40px 16px 32px; }
    .hero-tag { font-size: 0.65rem; letter-spacing: 2px; margin-bottom: 12px; }
    .hero h1 { font-size: clamp(1.7rem, 6vw, 2.4rem); margin-bottom: 12px; }
    .hero-sub { font-size: 0.88rem; line-height: 1.6; }
    .hero-meta { gap: 10px 16px; margin-top: 24px; }
    .quick-links { gap: 8px; margin-top: 18px; }
    .quick-links a { padding: 8px 14px; font-size: 0.76rem; }
    .hero-meta-item { font-size: 0.72rem; gap: 5px; }
    .hero-meta-item .icon { font-size: 0.95rem; }

    .container { padding: 0 14px; }

    .overview-strip { padding: 20px 14px; }
    .overview-grid {
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .overview-card { padding: 12px 14px; border-radius: 8px; }
    .overview-card .label { font-size: 0.58rem; letter-spacing: 1.5px; margin-bottom: 4px; }
    .overview-card .value { font-size: 1rem; }
    .overview-card .detail { font-size: 0.72rem; }

    .day-section { padding: 32px 0 24px; }
    .day-header { flex-wrap: wrap; gap: 8px; margin-bottom: 6px; }
    .day-badge { font-size: 0.6rem; padding: 4px 10px; }
    .day-date { font-size: 0.72rem; }
    .day-title { font-size: clamp(1.3rem, 5vw, 1.6rem); margin-bottom: 12px; }
    .day-subtitle { font-size: 0.85rem; margin-bottom: 20px; }

    /* Maps: shorter on mobile, full-width rounded corners */
    .map-wrapper { border-radius: 8px; margin-bottom: 20px; }
    .map-title-bar { padding: 10px 14px; font-size: 0.65rem; }
    .day-map { height: 300px; }

    /* Map labels: compact for small screens */
    .spot-label {
      font-size: 10px !important;
      padding: 2px 6px !important;
      max-width: 140px !important;
      white-space: normal !important;
      line-height: 1.3 !important;
    }
    .spot-label .label-time { font-size: 9px; }
    .spot-label .label-name { font-size: 10px; }
    .numbered-marker { width: 24px; height: 24px; font-size: 11px; border-width: 2px; }
    .numbered-marker.star-marker { width: 28px; height: 28px; font-size: 12px; }
    .dist-label { font-size: 9px !important; padding: 1px 5px !important; }

    /* Timeline */
    .timeline { padding-left: 28px; }
    .timeline::before { left: 5px; }
    .timeline-item { padding-bottom: 22px; }
    .timeline-item::before { left: -23px; width: 8px; height: 8px; }
    .timeline-item.highlight::before,
    .timeline-item.star::before { left: -24px; width: 10px; height: 10px; }
    .time-label { font-size: 0.72rem; }
    .event-title { font-size: 0.92rem; margin-bottom: 3px; }
    .event-title a { font-size: 0.75em !important; }
    .event-desc { font-size: 0.82rem; line-height: 1.55; }

    /* Callouts */
    .callout { padding: 16px 16px; margin: 18px 0; border-radius: 8px; }
    .callout-title { font-size: 0.78rem; }
    .callout p { font-size: 0.82rem; line-height: 1.55; }

    /* Info grid (packing + contacts) */
    .info-grid { grid-template-columns: 1fr; gap: 14px; }
    .info-card { padding: 16px 16px; border-radius: 8px; }
    .info-card h3 { font-size: 1rem; margin-bottom: 10px; }
    .info-card li { font-size: 0.8rem; padding: 3px 0; padding-left: 16px; }

    /* Health note */
    .health-note { padding: 16px 16px; border-radius: 8px; }
    .health-note h3 { font-size: 0.78rem; }
    .health-note p { font-size: 0.82rem; line-height: 1.55; }

    /* Table */
    table { font-size: 0.78rem; }
    th { padding: 10px 12px; font-size: 0.68rem; }
    td { padding: 10px 12px; }

    /* Footer */
    .footer { padding: 28px 16px; font-size: 0.72rem; }

    /* Leaflet popups */
    .leaflet-popup-content { font-size: 0.82rem; }
    .leaflet-popup-content h3 { font-size: 0.88rem; }
    .leaflet-popup-content p { font-size: 0.78rem; }
  }

  /* ‚îÄ‚îÄ RESPONSIVE ‚Äî SMALL MOBILE (‚â§380px) ‚îÄ‚îÄ */
  @media (max-width: 380px) {
    .hero { padding: 32px 12px 24px; }
    .hero h1 { font-size: 1.5rem; }
    .hero-sub { font-size: 0.82rem; }
    .hero-meta-item { font-size: 0.65rem; }

    .container { padding: 0 10px; }

    .overview-grid { grid-template-columns: 1fr; gap: 8px; }
    .overview-card { padding: 10px 12px; }
    .overview-card .value { font-size: 0.95rem; }

    .day-map { height: 250px; }

    .spot-label { display: none !important; }
    .dist-label { font-size: 8px !important; }
    .numbered-marker { width: 22px; height: 22px; font-size: 10px; }
    .numbered-marker.star-marker { width: 26px; height: 26px; font-size: 11px; }

    .event-title { font-size: 0.85rem; }
    .event-desc { font-size: 0.78rem; }

    .callout p { font-size: 0.78rem; }
    .info-card li { font-size: 0.75rem; }
  }

  /* ‚îÄ‚îÄ SAVE AS PDF BUTTON ‚îÄ‚îÄ */
  .save-pdf-btn {
    position: fixed;
    top: 16px;
    right: 16px;
    z-index: 9999;
    background: var(--forest);
    color: white;
    border: none;
    padding: 10px 20px;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 2px 12px rgba(0,0,0,0.2);
    transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
  }

  .save-pdf-btn:hover {
    background: var(--forest-light);
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.25);
  }

  .save-pdf-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }

  @media (max-width: 600px) {
    .save-pdf-btn {
      padding: 8px 14px;
      font-size: 0.78rem;
      top: 12px;
      right: 12px;
    }
  }

  @media (max-width: 380px) {
    .save-pdf-btn {
      padding: 6px 10px;
      font-size: 0.72rem;
    }
  }

  /* ‚îÄ‚îÄ POLL RESULTS ‚îÄ‚îÄ */
  .poll-section {
    background: var(--sand);
    padding: 48px 24px;
    border-top: 1px solid var(--sand-dark);
  }

  .poll-container {
    max-width: 820px;
    margin: 0 auto;
  }

  .poll-header {
    margin-bottom: 32px;
  }

  .poll-header h2 {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(1.6rem, 3vw, 2rem);
    color: var(--forest);
    font-weight: 400;
    margin-bottom: 8px;
  }

  .poll-header p {
    font-size: 0.88rem;
    color: var(--slate-light);
  }

  .poll-meta {
    display: flex;
    gap: 16px;
    margin-top: 12px;
    flex-wrap: wrap;
  }

  .poll-meta-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 1px;
    padding: 4px 12px;
    border-radius: 20px;
    background: var(--forest);
    color: white;
  }

  .poll-meta-badge.live { background: var(--moss); }

  .poll-card {
    background: white;
    border: 1px solid var(--sand-dark);
    border-radius: 10px;
    padding: 22px 24px;
    margin-bottom: 20px;
  }

  .poll-card h3 {
    font-size: 0.92rem;
    color: var(--forest);
    font-weight: 600;
    margin-bottom: 16px;
  }

  .poll-bar-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
  }

  .poll-bar-row:last-child { margin-bottom: 0; }

  .poll-bar-label {
    font-size: 0.78rem;
    color: var(--slate);
    width: 180px;
    flex-shrink: 0;
    text-align: left;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .poll-bar-track {
    flex: 1;
    height: 24px;
    background: var(--sand);
    border-radius: 6px;
    overflow: hidden;
    position: relative;
  }

  .poll-bar-fill {
    height: 100%;
    border-radius: 6px;
    background: var(--moss);
    transition: width 0.6s ease;
    min-width: 2px;
  }

  .poll-bar-fill.top { background: var(--amber); }
  .poll-bar-fill.second { background: var(--sky); }
  .poll-bar-fill.highlight { background: var(--forest); }

  .poll-bar-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    color: var(--slate-light);
    min-width: 52px;
    flex-shrink: 0;
    text-align: left;
  }

  .poll-stat-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 12px;
    margin-bottom: 20px;
  }

  .poll-stat {
    background: white;
    border: 1px solid var(--sand-dark);
    border-radius: 10px;
    padding: 16px;
    text-align: center;
  }

  .poll-stat .big {
    font-family: 'DM Serif Display', serif;
    font-size: 2rem;
    color: var(--forest);
    line-height: 1.1;
  }

  .poll-stat .small {
    font-size: 0.75rem;
    color: var(--slate-light);
    margin-top: 4px;
  }

  .poll-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .poll-loading {
    text-align: center;
    padding: 40px;
    color: var(--slate-light);
    font-size: 0.9rem;
  }

  .poll-error {
    text-align: center;
    padding: 24px;
    color: var(--rust);
    font-size: 0.85rem;
    background: #fef8f6;
    border-radius: 10px;
    border: 1px solid #f0d0c5;
  }

  @media (max-width: 900px) {
    .poll-grid { grid-template-columns: 1fr; }
    .poll-bar-label { width: 140px; font-size: 0.74rem; }
  }

  @media (max-width: 600px) {
    .poll-section { padding: 32px 14px; }
    .poll-card { padding: 16px 16px; }
    .poll-card h3 { font-size: 0.85rem; margin-bottom: 12px; }
    .poll-bar-row { gap: 6px; }
    .poll-bar-label { width: 110px; font-size: 0.7rem; }
    .poll-bar-track { height: 20px; }
    .poll-bar-value { font-size: 0.65rem; min-width: 44px; }
    .poll-grid { grid-template-columns: 1fr; }
    .poll-stat .big { font-size: 1.6rem; }
    .poll-stat-row { grid-template-columns: repeat(2, 1fr); gap: 8px; }
  }

  @media (max-width: 380px) {
    .poll-bar-label { width: 80px; font-size: 0.65rem; }
    .poll-bar-value { font-size: 0.6rem; min-width: 38px; }
  }

  /* ‚îÄ‚îÄ TOUCH IMPROVEMENTS ‚îÄ‚îÄ */
  @media (hover: none) and (pointer: coarse) {
    .leaflet-popup-content-wrapper { border-radius: 10px; }
    .leaflet-popup-content { padding: 12px 14px; }
    .leaflet-popup-close-button {
      font-size: 24px !important;
      width: 28px !important;
      height: 28px !important;
      padding: 4px !important;
    }
    .leaflet-control-zoom a {
      width: 36px !important;
      height: 36px !important;
      line-height: 36px !important;
      font-size: 20px !important;
    }
  }

  /* ‚îÄ‚îÄ SAFE AREA (notch phones) ‚îÄ‚îÄ */
  @supports (padding: env(safe-area-inset-top)) {
    .hero { padding-top: calc(40px + env(safe-area-inset-top)); }
    .footer { padding-bottom: calc(28px + env(safe-area-inset-bottom)); }
  }

  /* ‚îÄ‚îÄ EMBEDDED MAPS ‚îÄ‚îÄ */
  .map-wrapper {
    background: white;
    border-radius: 10px;
    overflow: hidden;
    border: 1px solid var(--sand-dark);
    margin-bottom: 28px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  }

  .map-wrapper .map-title-bar {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 18px;
    background: var(--sand);
    border-bottom: 1px solid var(--sand-dark);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--slate-light);
  }

  .map-title-bar .map-icon { font-size: 1rem; }

  .day-map {
    width: 100%;
    height: 420px;
  }

  .numbered-marker {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    color: white;
    font-family: 'DM Sans', sans-serif;
    font-weight: 700;
    font-size: 14px;
    border: 3px solid white;
    box-shadow: 0 2px 6px rgba(0,0,0,0.35);
    line-height: 1;
  }

  .numbered-marker.star-marker {
    width: 36px;
    height: 36px;
    font-size: 15px;
    box-shadow: 0 2px 8px rgba(212,145,59,0.5);
  }

  .spot-label {
    background: rgba(255,255,255,0.95) !important;
    border: 1px solid #ccc !important;
    border-radius: 6px !important;
    padding: 4px 10px !important;
    font-family: 'DM Sans', sans-serif !important;
    font-size: 12px !important;
    color: #333 !important;
    box-shadow: 0 1px 4px rgba(0,0,0,0.15) !important;
    white-space: nowrap !important;
    line-height: 1.4 !important;
  }

  .spot-label .label-time {
    font-weight: 700;
    color: var(--amber);
    display: block;
    font-size: 11px;
  }

  .spot-label .label-name {
    font-weight: 600;
    color: var(--forest);
  }

  .spot-label::before { display: none !important; }

  .arrow-icon {
    width: 0;
    height: 0;
    border: none;
    background: transparent;
  }

  .dist-label {
    background: rgba(255,255,255,0.92) !important;
    border: 1.5px solid rgba(0,0,0,0.2) !important;
    border-radius: 10px !important;
    padding: 2px 8px !important;
    font-family: 'JetBrains Mono', monospace !important;
    font-size: 10.5px !important;
    font-weight: 600 !important;
    color: #555 !important;
    box-shadow: 0 1px 3px rgba(0,0,0,0.12) !important;
    white-space: nowrap !important;
    letter-spacing: 0.3px !important;
  }

  .dist-label::before { display: none !important; }

  .leaflet-popup-content-wrapper {
    border-radius: 8px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  }

  .leaflet-popup-content {
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    color: var(--slate);
    margin: 0;
  }

  .leaflet-popup-content h3 {
    margin: 0 0 8px 0;
    color: var(--forest);
    font-weight: 600;
  }

  .leaflet-popup-content p {
    margin: 4px 0;
    font-size: 0.85rem;
  }

  /* ‚îÄ‚îÄ SOS / EMERGENCY ‚îÄ‚îÄ */
  .sos-card {
    background: #fef2ef;
    border: 2px solid var(--rust);
    border-radius: 10px;
    padding: 22px 24px;
    margin: 24px 0;
  }
  .sos-card h3 {
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--rust);
    margin-bottom: 14px;
  }
  .sos-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px 24px;
  }
  .sos-item {
    font-size: 0.85rem;
    color: var(--slate-light);
    line-height: 1.5;
  }
  .sos-item strong {
    color: var(--slate);
    display: block;
    font-size: 0.82rem;
  }
  .sos-item a {
    font-family: 'JetBrains Mono', monospace;
    color: var(--rust);
    text-decoration: none;
    font-weight: 500;
  }
  .sos-item a:hover { text-decoration: underline; }
  .sos-note {
    margin-top: 14px;
    font-size: 0.82rem;
    color: var(--slate-light);
    font-style: italic;
    border-top: 1px solid #f0d0c5;
    padding-top: 12px;
  }
  @media (max-width: 600px) {
    .sos-grid { grid-template-columns: 1fr; }
    .sos-card { padding: 16px 16px; }
  }

  /* ‚îÄ‚îÄ WHATSAPP SHARE BUTTON ‚îÄ‚îÄ */
  .whatsapp-btn {
    position: fixed;
    bottom: 16px;
    left: 16px;
    z-index: 9999;
    background: #25d366;
    color: white;
    border: none;
    padding: 10px 20px;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    border-radius: 8px;
    cursor: pointer;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.2);
    transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
  }
  .whatsapp-btn:hover {
    background: #20bd5a;
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.25);
  }
  .whatsapp-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  @media (max-width: 600px) {
    .whatsapp-btn { padding: 8px 14px; font-size: 0.78rem; bottom: 12px; left: 12px; }
  }
  @media (max-width: 380px) {
    .whatsapp-btn { padding: 6px 10px; font-size: 0.72rem; bottom: 10px; left: 10px; }
  }

  /* ‚îÄ‚îÄ POLL CTA ‚îÄ‚îÄ */
  .poll-cta {
    text-align: center;
    margin-bottom: 24px;
  }
  .poll-cta-btn {
    display: inline-block;
    background: var(--amber);
    color: white;
    text-decoration: none;
    padding: 12px 32px;
    border-radius: 50px;
    font-weight: 600;
    font-size: 0.9rem;
    transition: background 0.2s, transform 0.15s;
  }
  .poll-cta-btn:hover {
    background: var(--amber-light);
    transform: translateY(-1px);
  }

  /* ‚îÄ‚îÄ WEATHER WIDGET ‚îÄ‚îÄ */
  .weather-section {
    background: var(--sand);
    border-bottom: 1px solid var(--sand-dark);
    padding: 28px 24px;
  }
  .weather-title {
    max-width: 820px;
    margin: 0 auto 16px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--slate-light);
  }
  .weather-grid {
    max-width: 820px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
  }
  .weather-card {
    background: white;
    border: 1px solid var(--sand-dark);
    border-radius: 10px;
    padding: 18px 20px;
    text-align: center;
  }
  .weather-date {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--slate-light);
    margin-bottom: 8px;
  }
  .weather-icon { font-size: 2.2rem; margin-bottom: 4px; }
  .weather-condition {
    font-size: 0.85rem;
    color: var(--slate);
    font-weight: 500;
    margin-bottom: 8px;
  }
  .weather-temps {
    font-family: 'DM Serif Display', serif;
    font-size: 1.3rem;
    color: var(--forest);
  }
  .weather-temps .low {
    font-size: 0.95rem;
    color: var(--slate-light);
  }
  .weather-rain {
    margin-top: 6px;
    font-size: 0.78rem;
    color: var(--sky);
    font-weight: 500;
  }
  @media (max-width: 600px) {
    .weather-section { padding: 20px 14px; }
    .weather-grid { gap: 10px; }
    .weather-card { padding: 14px 14px; }
  }
  @media (max-width: 380px) {
    .weather-grid { grid-template-columns: 1fr; }
  }

  /* ‚îÄ‚îÄ DARK MODE TOGGLE ‚îÄ‚îÄ */
  .dark-mode-btn {
    position: fixed;
    top: 16px;
    left: 16px;
    z-index: 9999;
    background: var(--night);
    color: var(--star);
    border: none;
    padding: 10px 16px;
    font-size: 1rem;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 2px 12px rgba(0,0,0,0.2);
    transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
  }
  .dark-mode-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(0,0,0,0.25);
  }
  .dark-mode-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  @media (max-width: 600px) {
    .dark-mode-btn { padding: 8px 12px; font-size: 0.9rem; top: 12px; left: 12px; }
  }
  @media (max-width: 380px) {
    .dark-mode-btn { padding: 6px 10px; font-size: 0.82rem; left: 10px; }
  }

  /* ‚îÄ‚îÄ COLLAPSIBLE DAY SECTIONS ‚îÄ‚îÄ */
  .day-toggle {
    cursor: pointer;
    user-select: none;
    -webkit-user-select: none;
  }
  .day-chevron {
    float: right;
    font-size: 1.2rem;
    color: var(--slate-light);
    transition: transform 0.3s ease;
    line-height: 1;
  }
  .day-section.collapsed .day-chevron {
    transform: rotate(-90deg);
  }
  .day-content {
    max-height: 5000px;
    overflow: hidden;
    opacity: 1;
    transition: max-height 0.4s ease, opacity 0.3s ease;
  }
  .day-section.collapsed .day-content {
    max-height: 0;
    opacity: 0;
  }

  /* ‚îÄ‚îÄ TIMELINE PROGRESS SYNC ‚îÄ‚îÄ */
  .timeline-item.is-current {
    background: rgba(212, 145, 59, 0.1);
    border: 1px solid var(--amber);
    border-radius: 8px;
    padding: 12px 14px;
    margin-left: -14px;
    padding-left: 28px;
  }
  .timeline-item.is-current::before {
    background: var(--amber) !important;
    box-shadow: 0 0 0 2px var(--amber), 0 0 12px rgba(212, 145, 59, 0.6) !important;
    animation: pulse-current 2s ease-in-out infinite;
  }
  @keyframes pulse-current {
    0%, 100% { box-shadow: 0 0 0 2px var(--amber), 0 0 6px rgba(212, 145, 59, 0.4); }
    50% { box-shadow: 0 0 0 2px var(--amber), 0 0 14px rgba(212, 145, 59, 0.7); }
  }
  .timeline-item.is-past {
    opacity: 0.5;
  }
  .timeline-item.is-past::before {
    background: var(--sand-dark) !important;
    box-shadow: 0 0 0 2px var(--sand-dark) !important;
  }

  /* ‚îÄ‚îÄ DARK MODE OVERRIDES ‚îÄ‚îÄ */
  body.dark {
    --cream: #1a1e2e;
    --sand: #222740;
    --sand-dark: #2d3354;
    --slate: #e0ddd5;
    --slate-light: #a8a5a0;
  }
  body.dark .hero {
    background: linear-gradient(135deg, #0d1520 0%, #152030 40%, #1a3040 100%);
  }
  body.dark .overview-card,
  body.dark .info-card,
  body.dark .poll-card,
  body.dark .weather-card {
    background: #262b42;
    border-color: #3a4060;
  }
  body.dark .callout { background: #262b42; }
  body.dark .callout.warning { background: #2a2025; }
  body.dark .callout.amber-box { background: #2a2520; }
  body.dark .health-note {
    background: #2a2025;
    border-color: #503530;
  }
  body.dark .sos-card {
    background: #2a2025;
    border-color: #704540;
  }
  body.dark .map-wrapper { border-color: #3a4060; }
  body.dark .map-wrapper .map-title-bar {
    background: #2d3354;
    border-color: #3a4060;
  }
  body.dark .poll-section,
  body.dark .weather-section { background: #222740; }
  body.dark .footer { background: #0d1520; }
  body.dark .timeline::before {
    background: linear-gradient(to bottom, #4a6070, #3a4060);
  }
  body.dark .timeline-item::before {
    border-color: #1a1e2e;
    box-shadow: 0 0 0 2px #4a6070;
  }
  body.dark table { background: #262b42; border-color: #3a4060; }
  body.dark thead { background: #1a3a2a; }
  body.dark td { border-color: #3a4060; }
  body.dark .total-row { background: #2d3354; }
  body.dark .poll-bar-track { background: #2d3354; }
  body.dark .poll-stat { background: #262b42; border-color: #3a4060; }
  body.dark .day-section { border-color: #3a4060; }
  body.dark .overview-strip { border-color: #3a4060; }
  body.dark .poll-section { border-color: #3a4060; }
  body.dark .cost-section { background: #222740; }
  body.dark .dark-mode-btn {
    background: var(--star);
    color: var(--night);
  }
  body.dark .timeline-item.is-current {
    background: rgba(212, 145, 59, 0.08);
    border-color: var(--amber);
  }
  body.dark .timeline-item.is-past::before {
    background: #3a4060 !important;
    box-shadow: 0 0 0 2px #3a4060 !important;
  }

  /* Dark mode: green text overrides (--forest #1a3a2a is invisible on dark bg) */
  body.dark .day-title,
  body.dark .overview-card .value,
  body.dark .event-title,
  body.dark .callout-title,
  body.dark .cost-table h2,
  body.dark .total-row,
  body.dark .info-card h3,
  body.dark .poll-header h2,
  body.dark .poll-card h3,
  body.dark .poll-stat .big,
  body.dark .weather-temps,
  body.dark .leaflet-popup-content h3,
  body.dark .health-note h3,
  body.dark .sos-card h3 {
    color: #8fbfa0;
  }
  body.dark .section-title {
    color: #8fbfa0 !important;
  }
  body.dark .info-card li::before {
    color: #8fbfa0;
  }
  body.dark .time-label {
    color: var(--amber-light);
  }
  body.dark .spot-label .label-name {
    color: #8fbfa0;
  }

  /* ‚îÄ‚îÄ PRINT STYLES ‚îÄ‚îÄ */
  @media print {
    /* Hide elements that need network or are meaningless in PDF */
    .save-pdf-btn,
    .map-wrapper,
    .poll-section,
    #tripTracker,
    .quick-links {
      display: none !important;
    }

    /* Preserve background colors and graphics */
    * {
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }

    /* Page setup */
    @page {
      size: A4;
      margin: 18mm 15mm;
    }

    /* Hero: flatten to solid color, hide starfield */
    .hero {
      background: var(--forest) !important;
      padding: 40px 30px 36px !important;
    }

    .hero::before {
      display: none !important;
    }

    /* Page break control ‚Äî avoid splitting key blocks */
    .timeline-item,
    .callout,
    .info-card,
    .health-note,
    table {
      break-inside: avoid;
    }

    h1, h2, h3, h4, h5, h6 {
      break-after: avoid;
    }

    /* Callouts: preserve dark / colored backgrounds */
    .callout.night-box {
      background: var(--night) !important;
      color: rgba(255,255,255,0.85) !important;
    }

    .callout.night-box .callout-title {
      color: var(--star) !important;
    }

    .callout.warning {
      border-left-color: var(--rust) !important;
      background: #fef8f6 !important;
    }

    .callout.amber-box {
      border-left-color: var(--amber) !important;
      background: #fdf9f0 !important;
    }

    /* Suppress browser URL-after-link behavior */
    a[href]::after {
      content: none !important;
    }

    /* Typography: prevent orphans and widows */
    p {
      orphans: 3;
      widows: 3;
    }

    /* Flatten fixed/sticky positioning for print */
    body {
      overflow: visible !important;
    }

    /* Overview cards break control */
    .overview-card {
      break-inside: avoid;
    }

    /* Day sections should start cleanly */
    .day-section {
      break-before: auto;
    }

    /* Ensure event cards don't split */
    .event-card {
      break-inside: avoid;
    }

    /* ‚îÄ‚îÄ New features print rules ‚îÄ‚îÄ */
    .whatsapp-btn,
    .dark-mode-btn,
    .weather-section,
    .poll-cta {
      display: none !important;
    }

    .sos-card {
      break-inside: avoid;
    }

    .day-content {
      max-height: none !important;
      opacity: 1 !important;
      overflow: visible !important;
    }

    .day-chevron {
      display: none !important;
    }

    /* Dark mode print reset */
    body.dark {
      --cream: #faf8f4;
      --sand: #f5f0e8;
      --sand-dark: #e8e0d0;
      --slate: #3a3a3a;
      --slate-light: #6a6a6a;
      --forest: #1a3a2a;
      --forest-light: #2d5a3f;
      --moss: #4a7c59;
      --amber: #d4913b;
      --rust: #c45a3c;
      --sky: #5b93b0;
      --night: #1a1e2e;
      --star: #ffd475;
    }

    body.dark .overview-card,
    body.dark .info-card,
    body.dark .poll-card,
    body.dark .callout,
    body.dark table,
    body.dark .poll-stat {
      background: white !important;
      border-color: #e8e0d0 !important;
    }

    body.dark .callout.warning { background: #fef8f6 !important; }
    body.dark .callout.amber-box { background: #fdf9f0 !important; }
    body.dark .callout.night-box { background: var(--night) !important; color: rgba(255,255,255,0.85) !important; }
    body.dark .health-note { background: #fef8f6 !important; border-color: #f0d0c5 !important; }
    body.dark .sos-card { background: #fef2ef !important; border-color: var(--rust) !important; }
    body.dark .hero { background: var(--forest) !important; }
    body.dark .footer { background: var(--forest) !important; }
    body.dark .total-row { background: var(--sand) !important; }
    body.dark thead { background: var(--forest) !important; }
  }

</style>
</head>
<body>
<a class="whatsapp-btn" href="https://api.whatsapp.com/send?text=Pachmarhi%20Trip%20Itinerary%20%E2%80%94%20IISER%20Bhopal%20Squad%20%F0%9F%8F%95%EF%B8%8F%20Check%20it%20out!" target="_blank" title="Share on WhatsApp">üí¨ Share</a>
<button class="dark-mode-btn" onclick="toggleDarkMode()" title="Toggle dark mode">üåô</button>
<button id="savePdfBtn" class="save-pdf-btn" onclick="window.print()" title="Save as PDF for offline use">üìÑ Save as PDF</button>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="hero">
  <div class="hero-content">
    <div class="hero-tag">IISER Bhopal Squad ‚Äî Final Itinerary</div>
    <h1>Pachmarhi <em>Weekend</em><br>March 13‚Äì15, 2026</h1>
    <p class="hero-sub">Duchess Falls, Satpura snorkeling, cave temples, the highest sunset in Madhya Pradesh, and dark skies worth looking up at ‚Äî all in one weekend.</p>
    <div class="hero-meta">
      <div class="hero-meta-item"><span class="icon">üìç</span> Chunmun Cottage</div>
      <div class="hero-meta-item"><span class="icon">üöê</span> Force Traveller + driver</div>
      <div class="hero-meta-item"><span class="icon">üõ£</span> ~200 km drive</div>
      <div class="hero-meta-item"><span class="icon">üå°</span> 22‚Äì35¬∞C days ¬∑ 10‚Äì15¬∞C nights</div>
    </div>
    <div id="tripTracker" class="trip-tracker"></div>
    <div class="quick-links">
      <a href="https://drive.google.com/drive/folders/1sBWzoBbf-BMvGkgTm23Oc2baKd7aGdEs?usp=sharing" target="_blank"><span class="link-icon">üì∏</span> Upload Photos</a>
      <a href="https://open.spotify.com/playlist/6F0GV8KBIeKcr0nwkh76VJ?si=WFOLl5xOSki_q5B8Ztotfg&pt=8bea50cdcf899ebef8c2d21279d07bad&pi=kL--TqMCQVGck" target="_blank"><span class="link-icon">üéµ</span> Trip Playlist</a>
      <a href="https://www.splitwise.com/join/BwcRznsb87k+fn0r2?v=e" target="_blank"><span class="link-icon">üí∞</span> Join Splitwise</a>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê OVERVIEW STRIP ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="overview-strip">
  <div class="overview-grid">
    <div class="overview-card">
      <div class="label">Stay</div>
      <div class="value">Chunmun Cottage</div>
      <div class="detail">Civil Area, 500m from market ¬∑ Dormitory for 8‚Äì10</div>
    </div>
    <div class="overview-card">
      <div class="label">Departure</div>
      <div class="value">Fri, 1:00 PM</div>
      <div class="detail">Force Traveller ‚Äî arrive ~6 PM in daylight</div>
    </div>
    <div class="overview-card">
      <div class="label">Est. Cost / Person</div>
      <div class="value">~‚Çπ7,000</div>
      <div class="detail">Permits + gypsies + food + stay + activities</div>
    </div>
    <div class="overview-card">
      <div class="label">Advance Bookings</div>
      <div class="value">3 required</div>
      <div class="detail">Chunmun Cottage + Snorkeling Trek (TGA) + Force Traveller</div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê WEATHER WIDGET ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="weather-section" id="weatherSection">
  <div class="weather-title">3-Day Forecast ‚Äî Pachmarhi</div>
  <div class="weather-grid" id="weatherGrid">
    <div class="weather-card"><div class="weather-icon">‚è≥</div><div class="weather-condition">Loading forecast‚Ä¶</div></div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CONTENT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="container">

  <!-- ‚îÄ‚îÄ FRIDAY ‚îÄ‚îÄ -->
  <div class="day-section" id="day0">
    <div class="day-toggle" onclick="toggleDay(this)" aria-expanded="true">
      <div class="day-header">
        <span class="day-badge">Day 0</span>
        <span class="day-date">Friday, March 13</span>
        <span class="day-chevron">‚ñæ</span>
      </div>
      <div class="day-title">The Drive In</div>
    </div>
    <div class="day-content">
    <p class="day-subtitle">Leave early, arrive in daylight, and settle in for the weekend.</p>

    <div class="map-wrapper">
      <div class="map-title-bar"><span class="map-icon">üó∫</span> Friday Route Map</div>
      <div id="mapFriday" class="day-map"></div>
    </div>

    <div class="timeline">
      <div class="timeline-item" data-event-idx="0">
        <div class="time-label">12:30 PM</div>
        <div class="event-title">Assemble at IISER Bhopal (Bhauri campus) <a href="https://www.google.com/maps/search/IISER+Bhopal+Bhauri" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Final headcount, load luggage. Make sure everyone has: cash (‚Çπ5,000), offline Google Maps downloaded, original photo IDs, and trekking shoes packed.</div>
      </div>

      <div class="timeline-item" data-event-idx="1">
        <div class="time-label">1:00 PM</div>
        <div class="event-title">Depart IISER Bhopal in the Force Traveller <a href="https://www.google.com/maps/dir/IISER+Bhopal+Bhauri/Pachmarhi+Madhya+Pradesh" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Route</a></div>
        <div class="event-desc">Take NH 45 south through Hoshangabad/Narmadapuram to Pipariya. First 150 km is smooth four-lane highway. The Force Traveller takes closer to 5 hours for the full drive. Mobile signal drops after Pipariya.</div>
      </div>

      <div class="timeline-item" data-event-idx="2">
        <div class="time-label">~3:30 PM</div>
        <div class="event-title">Quick chai/snack break near Pipariya <a href="https://www.google.com/maps/search/Pipariya+Railway+Station+Madhya+Pradesh" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Last reliable stop before the ghat road. Top up snacks, use restrooms. Pipariya has ATMs if anyone forgot cash.</div>
      </div>

      <div class="timeline-item highlight" data-event-idx="3">
        <div class="time-label">~4:00‚Äì5:30 PM</div>
        <div class="event-title">50 km ghat road through Satpura forest <a href="https://www.google.com/maps/dir/Pipariya+Madhya+Pradesh/Pachmarhi+Madhya+Pradesh" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Route</a></div>
        <div class="event-desc">The scenic highlight of the drive ‚Äî sharp hairpin bends through dense sal and teak forest. Leaving at 1 PM means you'll hit this stretch in daylight ‚Äî a huge advantage over evening arrivals. Keep speed under 40 km/h on curves, watch for wildlife crossings. The driver will know this road.</div>
      </div>

      <div class="timeline-item" data-event-idx="4">
        <div class="time-label">~5:30‚Äì6:00 PM</div>
        <div class="event-title">Arrive Pachmarhi ‚Äî Check in at Chunmun Cottage <a href="https://www.google.com/maps/search/Chunmun+Cottage+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Civil Area location, ~500m from the main market. Settle into the dormitory rooms. The cottage has open grounds, parking, and campfire area. The Force Traveller parks here for the weekend ‚Äî your driver can arrange local logistics.</div>
      </div>

      <div class="timeline-item" data-event-idx="5">
        <div class="time-label">6:30‚Äì8:00 PM</div>
        <div class="event-title">Explore main market + dinner <a href="https://www.google.com/maps/search/Pachmarhi+main+market+bazaar" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Walk to Pachmarhi bazaar. Grab dinner at <strong>Jalaram Bhojnalaya</strong> (<a href="https://www.google.com/maps/search/Jalaram+Bhojnalaya+Pachmarhi" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a> unlimited thali, ‚Çπ100‚Äì150) or <strong>Maheshwari Restaurant</strong> (<a href="https://www.google.com/maps/search/Maheshwari+Restaurant+Pachmarhi" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a> near the bus stand). Browse shops selling local honey, bamboo handicrafts, and banana silk fabrics. Most shops close by 9:30 PM. Pick up snacks and water bottles for tomorrow's treks.</div>
      </div>

      <div class="timeline-item">
        <div class="time-label">8:30 PM</div>
        <div class="event-title">Campfire at Chunmun Cottage + early sleep <a href="https://www.google.com/maps/search/Chunmun+Cottage+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Chunmun has evening campfire facilities. Settle in early ‚Äî tomorrow starts at 7 AM and it's a packed day. Set alarms.</div>
      </div>
    </div>

    <div class="callout amber-box">
      <div class="callout-title">Before you leave Bhopal</div>
      <p><strong>Download offline Google Maps</strong> for the Pachmarhi region ‚Äî signal is unreliable in the forest zone. Jio and Airtel are patchy; BSNL works best. Carry <strong>‚Çπ5,000 cash per person</strong> ‚Äî many vendors, adventure operators, and restaurants are cash-only. Pack <strong>trekking shoes</strong> (non-negotiable for Duchess Falls and snorkeling trek), towels, dry clothes, sunscreen, and a flashlight for the caves.</p>
    </div>
    </div><!-- /day-content -->
  </div>

  <!-- ‚îÄ‚îÄ SATURDAY ‚îÄ‚îÄ -->
  <div class="day-section" id="day1">
    <div class="day-toggle" onclick="toggleDay(this)" aria-expanded="true">
      <div class="day-header">
        <span class="day-badge amber">Day 1</span>
        <span class="day-date">Saturday, March 14</span>
        <span class="day-chevron">‚ñæ</span>
      </div>
      <div class="day-title">Duchess Falls, Caves & the Highest Sunset</div>
    </div>
    <div class="day-content">
    <p class="day-subtitle">Morning: the trek everyone voted for. Afternoon: cave temples by Force Traveller. Evening: sunset from 1,352m ‚Äî the highest point in Madhya Pradesh.</p>

    <div class="map-wrapper">
      <div class="map-title-bar"><span class="map-icon">üó∫</span> Saturday Route Map ‚Äî 10 stops</div>
      <div id="mapSaturday" class="day-map"></div>
    </div>

    <div class="timeline">
      <div class="timeline-item" data-event-idx="6">
        <div class="time-label">7:00 AM</div>
        <div class="event-title">Breakfast at Maheshwari Restaurant <a href="https://www.google.com/maps/search/Maheshwari+Restaurant+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Walk to the bus stand area. The classic MP breakfast: poha-jalebi combo and sabudana khichdi. ‚Çπ80‚Äì100/person. Quick, filling, and you'll need the energy.</div>
      </div>

      <div class="timeline-item highlight" data-event-idx="7">
        <div class="time-label">8:00 AM ‚Äî be here sharp</div>
        <div class="event-title">Bison Lodge Museum ‚Äî Permits + Gypsy booking <a href="https://www.google.com/maps/search/Bison+Lodge+Museum+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc"><strong>This is the single most important logistical moment of the trip.</strong> Buy composite forest permits (‚Çπ660/person) and book <strong>2 gypsies</strong> for the waterfall route. Arriving at 8 AM (when it opens) saves you 1‚Äì2 hours vs the tourist crowd that shows up at 10. One person handles the queue while others check out the taxidermy museum.</div>
      </div>

      <div class="timeline-item star" data-event-idx="8">
        <div class="time-label">9:00 AM ‚Äì 12:30 PM</div>
        <div class="event-title">Duchess Falls Trek ‚Äî the hidden 100m cascade <a href="https://www.google.com/maps/search/Duchess+Falls+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">The moment 100% of the group voted for. Your gypsy drops you at the trailhead, then it's a <strong>4‚Äì5 km trek over boulders and rocky forest terrain</strong> to reach a 100m waterfall splitting into three separate cascades. Guides will try to discourage you ‚Äî don't listen. Swim in the natural pool at the base, and look for the "doctor fish" pools where tiny fish nibble dead skin off your feet. A nimbu paani stall appears midway. Budget ~2.5‚Äì3 hours including trek time + time at the falls. <strong>Sturdy trekking shoes are mandatory.</strong></div>
      </div>

      <div class="timeline-item" data-event-idx="9">
        <div class="time-label">12:30 ‚Äì 1:00 PM</div>
        <div class="event-title">Bee Falls (Jamuna Prapat) ‚Äî optional if time permits <a href="https://www.google.com/maps/search/Bee+Falls+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">On the gypsy route back from Duchess Falls area. The iconic 35m waterfall ‚Äî swim under the cascade if energy permits. The 400+ step descent is tough after the Duchess trek, so skip the descent if legs are done. At minimum, catch the view from the top. Carry towels and dry clothes.</div>
      </div>

      <div class="timeline-item" data-event-idx="10">
        <div class="time-label">1:00 ‚Äì 2:15 PM</div>
        <div class="event-title">Lunch in town <a href="https://www.google.com/maps/search/Pachmarhi+bus+stand+market" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc"><strong>Jalaram Bhojnalaya</strong> (<a href="https://www.google.com/maps/search/Jalaram+Bhojnalaya+Pachmarhi" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a>) for unlimited Gujarati/Rajasthani thali (‚Çπ100‚Äì150 ‚Äî the group's top-voted budget pick). Or <strong>Bombay Hotel</strong> (<a href="https://www.google.com/maps/search/Bombay+Hotel+Restaurant+Pachmarhi" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a>) for non-veg lovers: mutton biryani and Mughlai dishes from a three-generation recipe (‚Çπ100‚Äì250). Rest your legs.</div>
      </div>

      <div class="timeline-item" data-event-idx="11">
        <div class="time-label">2:30 ‚Äì 3:30 PM</div>
        <div class="event-title">Jata Shankar Caves + Harper's Cave <a href="https://www.google.com/maps/search/Jata+Shankar+Caves+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Take the Force Traveller (no gypsy needed). Natural stalagmite Shivalingams inside a cool, atmospheric ravine ‚Äî genuinely unique geology. Takes ~1 hour. Don't skip <strong>Harper's Cave</strong> nearby ‚Äî a 10,000-year-old rock painting of a figure playing a harp, just 15 minutes extra.</div>
      </div>

      <div class="timeline-item" data-event-idx="12">
        <div class="time-label">3:45 ‚Äì 5:00 PM</div>
        <div class="event-title">Bada Mahadev + Gupt Mahadev <a href="https://www.google.com/maps/search/Bada+Mahadev+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Drive to Bada Mahadev: a towering 60-foot cave shrine with water continuously dripping from the rock ceiling. Then Gupt Mahadev: a narrow rock fissure you squeeze through sideways, single-file, in near-darkness. <strong>Carry a flashlight.</strong> These are the most atmospheric spots in Pachmarhi ‚Äî genuinely thrilling. Both accessible by Force Traveller, no gypsy needed.</div>
      </div>

      <div class="timeline-item star" data-event-idx="13">
        <div class="time-label">5:15 ‚Äì 7:00 PM</div>
        <div class="event-title">Dhoopgarh Sunset ‚Äî MP's highest point at 1,352m <a href="https://www.google.com/maps/search/Dhoopgarh+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">The single most spectacular experience in Pachmarhi. A 360¬∞ sunset over the Satpura and Vindhya ranges. Arrive by 5:15 PM to claim a good spot. Stay 15‚Äì20 minutes after the sun dips below the horizon ‚Äî the post-sunset light paints the valleys in orange and purple. <strong>Monkeys are aggressive here</strong> ‚Äî keep all bags zipped, no visible food, don't make eye contact or show teeth.</div>
      </div>

      <div class="timeline-item highlight" data-event-idx="14">
        <div class="time-label">7:30 ‚Äì 9:00 PM</div>
        <div class="event-title">Dinner at Beta Bawarchi <a href="https://www.google.com/maps/search/Beta+Bawarchi+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">The group's top vote at 75%. Pachmarhi's most popular restaurant ‚Äî huge open-air garden seating with <strong>live unplugged music starting ~7:30 PM</strong>. Order the Paneer Angara, Paneer Lababdar, and Dal Dhaba. They offer free pickup/drop from your cottage if needed. ~‚Çπ250‚Äì500/person for a full meal. Non-veg reportedly available if you ask.</div>
      </div>

      <div class="timeline-item" data-event-idx="15">
        <div class="time-label">9:00 ‚Äì 10:00 PM</div>
        <div class="event-title">Main market stroll <a href="https://www.google.com/maps/search/Pachmarhi+main+market+bazaar" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Voted by 62.5% of the group. Walk through the bazaar for street food (Maggi, chaat, dosa at ‚Çπ50/item from chaupati stalls), browse souvenir shops. Cash-only. Most shops close by 9:30‚Äì10 PM.</div>
      </div>
    </div>

    <div class="callout night-box">
      <div class="callout-title">Stargazing ‚Äî the astrophysics option <a href="https://www.google.com/maps/search/Stargazing+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
      <p>Pachmarhi has virtually zero light pollution ‚Äî one of the darkest skies in central India. <strong>"Star Gazing Pachmarhi"</strong> runs guided telescope sessions showing Mars, Venus, Jupiter, Saturn, the Andromeda Galaxy (2.5 million light-years out), the Milky Way band, Orion, and Sirius ‚Äî all with explanations. ‚Çπ200/person, sessions after sunset (~7:30‚Äì9 PM), consistently 5-star rated on TripAdvisor. Call ahead: <strong>9479652798 / 7828885655</strong>. Instagram: @stargazingpachmarhi. If you can squeeze this in after dinner, it's an unforgettable way to end the night ‚Äî and Pachmarhi's skies genuinely deliver for deep-sky observation.</p>
    </div>

    </div><!-- /day-content -->
  </div>

  <!-- ‚îÄ‚îÄ SUNDAY ‚îÄ‚îÄ -->
  <div class="day-section" id="day2">
    <div class="day-toggle" onclick="toggleDay(this)" aria-expanded="true">
      <div class="day-header">
        <span class="day-badge sky">Day 2</span>
        <span class="day-date">Sunday, March 15</span>
        <span class="day-chevron">‚ñæ</span>
      </div>
      <div class="day-title">Snorkeling Trek, Reechgarh & the Drive Home</div>
    </div>
    <div class="day-content">
    <p class="day-subtitle">Morning: the activity 87.5% of you called a "deal breaker." Afternoon: the natural canyon, final viewpoints, and the scenic return drive through the Satpura ghats.</p>

    <div class="map-wrapper">
      <div class="map-title-bar"><span class="map-icon">üó∫</span> Sunday Route Map ‚Äî 8 stops + return drive</div>
      <div id="mapSunday" class="day-map"></div>
    </div>

    <div class="timeline">
      <div class="timeline-item" data-event-idx="16">
        <div class="time-label">7:00 AM</div>
        <div class="event-title">Early breakfast + pack up <a href="https://www.google.com/maps/search/Chunmun+Cottage+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Grab poha-jalebi from a market stall or eat at the cottage. Check out of Chunmun Cottage (they offer a post-checkout freshen-up facility ‚Äî confirm in advance). Pack all bags into the Force Traveller. Carry packed snacks and water for the day ‚Äî no eateries near any trek.</div>
      </div>

      <div class="timeline-item star" data-event-idx="17">
        <div class="time-label">8:00 AM ‚Äì 12:30 PM</div>
        <div class="event-title">Snorkeling Trek through Satpura Forest <a href="https://www.google.com/maps/search/The+Gypsy+Adventures+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">The group's most-voted activity at 87.5%. Run exclusively by <strong>The Gypsy Adventures (TGA)</strong>, this combines a jungle trek with freshwater snorkeling in a hidden rock pool deep inside the Satpura Biosphere Reserve. They pick you up from the cottage in a rugged gypsy vehicle, drive to the trailhead, then a ~50-minute downhill trek through dense forest with a local naturalist guide sharing stories about rare flora and tribal culture. The trail follows a stream to a hidden rock pool ‚Äî snorkeling gear provided, you'll see colourful fish in crystal-clear freshwater. Packed lunch served in eco-friendly steel tiffins by the pool. Trek back uphill (the harder part). ~4‚Äì5 hours total including transport. <strong>Moderate fitness required.</strong></div>
      </div>

      <div class="timeline-item" data-event-idx="18">
        <div class="time-label">12:30 ‚Äì 1:30 PM</div>
        <div class="event-title">Quick lunch in town <a href="https://www.google.com/maps/search/Pachmarhi+bus+stand+market" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc"><strong>Dine Inn Food Court</strong> (<a href="https://www.google.com/maps/search/Dine+Inn+Hotel+Utkarsh+Pachmarhi" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a>) at Hotel Utkarsh ‚Äî multi-cuisine, fast service, rated 4.7 on TripAdvisor. Or <strong>Rahul's Pizza</strong> (<a href="https://www.google.com/maps/search/Rahul+Pizza+Pachmarhi" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a>) near the market for surprisingly good street-style pizza at roadside prices. You need to eat fast ‚Äî afternoon is tight before departure.</div>
      </div>

      <div class="timeline-item highlight" data-event-idx="19">
        <div class="time-label">1:45 ‚Äì 2:45 PM</div>
        <div class="event-title">Reechgarh ‚Äî the natural canyon <a href="https://www.google.com/maps/search/Reechgarh+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Voted by 100% of the group. A massive 400m narrow canyon passage between towering sandstone walls ‚Äî noticeably cooler inside (travelers call it "natural AC"). Walk through the passage, check out the water-erosion patterns from centuries of submergence ‚Äî 2,000-year-old geology you can touch. There's an echo point nearby. ~1 hour.</div>
      </div>

      <div class="timeline-item" data-event-idx="20">
        <div class="time-label">3:00 ‚Äì 3:40 PM</div>
        <div class="event-title">Priyadarshini Point ‚Äî panoramic farewell view <a href="https://www.google.com/maps/search/Priyadarshini+Point+Pachmarhi" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">The exact spot where Captain Forsyth first discovered Pachmarhi in 1857. Eagle's-eye panoramic view of the entire Pachmarhi valley, Handi Khoh ravine, and the Satpura Range stretching to the horizon. Quick, easy access by Force Traveller, minimal walking. Perfect last stop for group photos. ~30 minutes.</div>
      </div>



      <div class="timeline-item highlight" data-event-idx="21">
        <div class="time-label">4:30 PM</div>
        <div class="event-title">Depart Pachmarhi for Bhopal <a href="https://www.google.com/maps/dir/Pachmarhi+Madhya+Pradesh/IISER+Bhopal+Bhauri" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Route</a></div>
        <div class="event-desc">The return drive takes ~5 hours in the Force Traveller. The 50 km ghat road descent through Satpura forest is beautiful in daylight ‚Äî enjoy the views you missed on the way up. Once past Pipariya, it's smooth four-lane highway back to Bhopal.</div>
      </div>



      <div class="timeline-item" data-event-idx="23">
        <div class="time-label">~9:30 ‚Äì 10:00 PM</div>
        <div class="event-title">Arrive back at IISER Bhopal <a href="https://www.google.com/maps/search/IISER+Bhopal+Bhauri" target="_blank" style="font-size:0.8em;text-decoration:none;">üìç Map</a></div>
        <div class="event-desc">Home. Tired, sunburnt, probably still finding sand in your shoes from the Duchess Falls trek. Worth every step.</div>
      </div>
    </div>

    <div class="callout">
      <div class="callout-title">Snorkeling Trek ‚Äî Book in advance</div>
      <p>This is run exclusively by <strong>The Gypsy Adventures (TGA)</strong> and group slots fill up. Book now.<br>
      <strong>Phone:</strong> +91 92055 15652<br>
      <strong>Office:</strong> Hotel Kachnar, Arvind Marg, Pachmarhi 461881<br>
      <strong>Website:</strong> thegypsyadventures.com<br>
      <strong>Rated:</strong> 4.7 stars on Justdial (689+ reviews)<br>
      Price: ‚Çπ1,500/person. They also bundle with river deck camping and stargazing.</p>
    </div>
    </div><!-- /day-content -->
  </div>

</div><!-- /container -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê COST BREAKDOWN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PACKING + CONTACTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="container">
  <div class="day-section" id="dayPacking">
    <div class="day-toggle" onclick="toggleDay(this)" aria-expanded="true">
      <div class="day-title">What to Pack & Key Contacts <span class="day-chevron">‚ñæ</span></div>
    </div>
    <div class="day-content">

    <div class="info-grid">
      <div class="info-card">
        <h3>Essential Packing List</h3>
        <ul>
          <li>Sturdy trekking shoes (non-negotiable)</li>
          <li>Towel + dry clothes (for waterfall swims)</li>
          <li>Flashlight/phone torch (for Gupt Mahadev)</li>
          <li>Sunscreen + sunglasses + hat</li>
          <li>2L water bottle per person per day</li>
          <li>Zipped backpack (monkey-proof)</li>
          <li>‚Çπ5,000 cash from Bhopal</li>
          <li>Original photo ID (for permits)</li>
          <li>Offline Google Maps (pre-downloaded)</li>

          <li>Packed snacks (biscuits, dry fruits, energy bars)</li>
          <li>Swimwear for snorkeling trek</li>
        </ul>
      </div>
      <div class="info-card">
        <h3>Key Contacts & Bookings</h3>
        <ul>
          <li><strong>Chunmun Cottage:</strong> 07578-252133 / 92786 00200 ¬∑ <a href="https://www.google.com/maps/search/Chunmun+Cottage+Pachmarhi" target="_blank">Google Reviews (4.3‚òÖ)</a></li>
          <li><strong>Snorkeling Trek (TGA):</strong> +91 92055 15652 ¬∑ <a href="https://www.google.com/maps/search/The+Gypsy+Adventures+Pachmarhi" target="_blank">Google Reviews (4.7‚òÖ)</a></li>
          <li><strong>Star Gazing Pachmarhi:</strong> 94796 52798 / 78288 85655 ¬∑ @stargazingpachmarhi</li>
          <li><strong>Satpura Adventure Club:</strong> +91 94253 67365 ¬∑ <a href="https://www.google.com/maps/search/Satpura+Adventure+Club+Pachmarhi" target="_blank">Google Reviews (4.7‚òÖ)</a></li>
          <li><strong>Beta Bawarchi:</strong> Free hotel pickup ¬∑ @betabawarchi ¬∑ <a href="https://www.google.com/maps/search/Beta+Bawarchi+Pachmarhi" target="_blank">Google Reviews (4.0‚òÖ)</a></li>
          <li><strong>Bison Lodge:</strong> Open 8 AM‚Äì12 PM, 4‚Äì7 PM (closed Mon)</li>
          <li><strong>SBI ATM:</strong> Near bus stand (can run dry on weekends)</li>
          <li><strong>Best network:</strong> BSNL > Jio > Airtel</li>
        </ul>
      </div>
    </div>

    <div class="health-note">
      <h3>Health & Safety Reminders</h3>
      <p><strong>Member on blood thinners:</strong> Exercise extra caution on rocky terrain during the Duchess Falls trek and snorkeling trek. Avoid the "doctor fish" pools. Keep a basic first-aid kit accessible ‚Äî band-aids, antiseptic wipes. Cuts should be treated immediately.<br><br>
      <strong>Member with knee/shoulder issue:</strong> The Duchess Falls trek (4‚Äì5 km over boulders) and the snorkeling trek (50-min uphill return) are both moderately demanding. Consider using a trekking pole if available. The afternoon cave visits on Saturday and Reechgarh on Sunday are far less strenuous. Bee Falls' 400-step descent/ascent can be skipped entirely.<br><br>
      <strong>Everyone:</strong> Monkeys are aggressive at Dhoopgarh, Chauragarh, and viewpoints ‚Äî keep everything in zipped bags. No eating in the open. Slippery rocks near waterfalls have caused injuries; move carefully. Drink plenty of water ‚Äî March heat at 22‚Äì35¬∞C dehydrates faster than you expect on treks.</p>
    </div>

    <div class="sos-card">
      <h3>üö® Emergency / SOS Numbers</h3>
      <div class="sos-grid">
        <div class="sos-item">
          <strong>Ambulance (EMRI)</strong>
          <a href="tel:108">108</a>
        </div>
        <div class="sos-item">
          <strong>Cantonment Hospital (4.3‚òÖ)</strong>
          <a href="tel:07578292027">07578-292027</a> <a href="https://www.google.com/maps/search/Cantonment+Hospital+Pachmarhi+FCFM%2B5M2" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a>
        </div>
        <div class="sos-item">
          <strong>CHC Panchmarhi (Govt.)</strong>
          <a href="tel:09098873638">090988 73638</a> <a href="https://www.google.com/maps/search/Community+Health+Centre+Babu+Line+Pachmarhi+near+Police+Station" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a>
        </div>
        <div class="sos-item">
          <strong>Police ‚Äî Pachmarhi</strong>
          <a href="tel:07578286660">07578-286660</a> <a href="https://www.google.com/maps/search/Police+Station+Pachmarhi+Cantonment" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a>
        </div>
        <div class="sos-item">
          <strong>District Hospital Narmadapuram</strong>
          <a href="tel:07574252464">07574-252464</a> <a href="https://www.google.com/maps/search/District+Hospital+Narmadapuram+Hoshangabad+Saket+Colony" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a>
        </div>
        <div class="sos-item">
          <strong>Satpura Tiger Reserve (Forest)</strong>
          <a href="tel:07574254394">07574-254394</a> <a href="https://www.google.com/maps/search/Satpura+Tiger+Reserve+Office+Pachmarhi+Cantonment" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a>
        </div>
        <div class="sos-item">
          <strong>Fire</strong>
          <a href="tel:101">101</a>
        </div>
        <div class="sos-item">
          <strong>MP Tourism Helpline</strong>
          <a href="tel:18002337777">1800-233-7777</a>
        </div>
        <div class="sos-item">
          <strong>Tourist Helpline (24x7)</strong>
          <a href="tel:1800111363">1800-11-1363</a>
        </div>
      </div>
      <p class="sos-note" style="font-style:normal; margin-top:16px; border-top:none; padding-top:0;">
        <strong style="color:var(--slate); display:block; margin-bottom:6px;">Local Medical ‚Äî Pachmarhi Town</strong>
        <span>ü©∫ <strong>Dr Syed Azhar Ali</strong> ‚Äî Nehru Road ¬∑ <a href="tel:09425692644" style="color:var(--rust);">094256 92644</a> ¬∑ till 9:30 PM <a href="https://www.google.com/maps/search/Dr+Syed+Azhar+Ali+Nehru+Road+Pachmarhi" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a></span><br>
        <span>üíä <strong>Laxmi Medical</strong> ‚Äî Jawahar Chowk ¬∑ <a href="tel:09425310427" style="color:var(--rust);">094253 10427</a> ¬∑ till 10 PM <a href="https://www.google.com/maps/search/Laxmi+Medical+Jawahar+Chowk+Pachmarhi" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a></span><br>
        <span>üíä <strong>Sharma Medical Store</strong> ‚Äî Patel Rd ¬∑ <a href="tel:09407810291" style="color:var(--rust);">094078 10291</a> ¬∑ till 11:30 PM <a href="https://www.google.com/maps/search/Sharma+Medical+Store+Patel+Road+Pachmarhi" target="_blank" style="font-size:0.85em;text-decoration:none;">üìç</a></span>
      </p>
      <p class="sos-note">For major emergencies beyond Pachmarhi: <a href="https://www.google.com/maps/search/Civil+Hospital+Pipariya+Narmadapuram" target="_blank" style="color:var(--rust);text-decoration:underline;">Pipariya CHC</a> (~47 km) for stabilization, <a href="https://www.google.com/maps/search/District+Hospital+Narmadapuram+Hoshangabad" target="_blank" style="color:var(--rust);text-decoration:underline;">District Hospital Narmadapuram</a> (~110 km) for full care.</p>
    </div>

    </div><!-- /day-content -->
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê POLL RESULTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="poll-section" id="pollSection">
  <h2 class="section-title" style="color: var(--forest);">üìä Live Poll Results</h2>
  <p class="section-subtitle" style="text-align:center; margin-bottom: 28px; color: var(--slate-light);">Anonymised responses from the group ‚Äî updates automatically as more people fill the form.</p>
  <div class="poll-cta">
    <a class="poll-cta-btn" href="https://forms.gle/hnj3pexiRBQo8Kyf8" target="_blank">üìù Fill the Trip Poll</a>
  </div>
  <div id="pollResults">
    <p style="text-align:center; padding: 40px 0; color: var(--slate-light);">Loading poll data‚Ä¶</p>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="footer">
  <p>Pachmarhi Trip Itinerary ‚Äî IISER Bhopal Squad ‚Äî March 13‚Äì15, 2026</p>
  <p style="margin-top: 8px;"><strong>Remember:</strong> Bison Lodge at 8 AM sharp. Insist on Duchess Falls. Look up at the stars.</p>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TRIP TRACKER SCRIPT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
(function() {
  var TRIP_START = '2026-03-13T12:30:00+05:30';
  var TRIP_END   = '2026-03-15T22:00:00+05:30';

  var TRIP_EVENTS = [
    { time: '2026-03-13T12:30:00+05:30', end: '2026-03-13T13:00:00+05:30', title: 'Assemble at IISER Gate', day: 1 },
    { time: '2026-03-13T13:00:00+05:30', end: '2026-03-13T18:00:00+05:30', title: 'Drive to Pachmarhi', day: 1 },
    { time: '2026-03-13T18:00:00+05:30', end: '2026-03-13T19:00:00+05:30', title: 'Check in at Chunmun Cottage', day: 1 },
    { time: '2026-03-13T19:00:00+05:30', end: '2026-03-13T20:30:00+05:30', title: 'Sunset at Priyadarshini Point', day: 1 },
    { time: '2026-03-13T20:30:00+05:30', end: '2026-03-13T21:30:00+05:30', title: 'Dinner in town', day: 1 },
    { time: '2026-03-13T21:30:00+05:30', end: '2026-03-13T23:00:00+05:30', title: 'Stargazing at Astro Point', day: 1 },
    { time: '2026-03-14T07:00:00+05:30', end: '2026-03-14T07:30:00+05:30', title: 'Wake up & breakfast', day: 2 },
    { time: '2026-03-14T08:00:00+05:30', end: '2026-03-14T09:00:00+05:30', title: 'Bison Lodge permits', day: 2 },
    { time: '2026-03-14T09:00:00+05:30', end: '2026-03-14T12:30:00+05:30', title: 'Duchess Falls hike', day: 2 },
    { time: '2026-03-14T12:30:00+05:30', end: '2026-03-14T13:30:00+05:30', title: 'Lunch break', day: 2 },
    { time: '2026-03-14T13:30:00+05:30', end: '2026-03-14T15:30:00+05:30', title: 'Bee Falls & Jata Shankar Cave', day: 2 },
    { time: '2026-03-14T15:30:00+05:30', end: '2026-03-14T17:00:00+05:30', title: 'Pandav Caves & Museum', day: 2 },
    { time: '2026-03-14T17:00:00+05:30', end: '2026-03-14T18:30:00+05:30', title: 'Dhoopgarh sunset drive', day: 2 },
    { time: '2026-03-14T18:30:00+05:30', end: '2026-03-14T19:00:00+05:30', title: 'Golden hour at Dhoopgarh', day: 2 },
    { time: '2026-03-14T19:30:00+05:30', end: '2026-03-14T20:30:00+05:30', title: 'Dinner', day: 2 },
    { time: '2026-03-14T21:00:00+05:30', end: '2026-03-14T22:30:00+05:30', title: 'Night walk & stargazing', day: 2 },
    { time: '2026-03-15T06:00:00+05:30', end: '2026-03-15T07:00:00+05:30', title: 'Sunrise trek (optional)', day: 3 },
    { time: '2026-03-15T07:00:00+05:30', end: '2026-03-15T08:00:00+05:30', title: 'Breakfast & pack up', day: 3 },
    { time: '2026-03-15T08:00:00+05:30', end: '2026-03-15T08:30:00+05:30', title: 'Checkout from cottage', day: 3 },
    { time: '2026-03-15T08:30:00+05:30', end: '2026-03-15T12:00:00+05:30', title: 'Satpura snorkeling trek (TGA)', day: 3 },
    { time: '2026-03-15T12:00:00+05:30', end: '2026-03-15T13:00:00+05:30', title: 'Lunch at Reechgarh', day: 3 },
    { time: '2026-03-15T13:00:00+05:30', end: '2026-03-15T14:00:00+05:30', title: 'Reechgarh cave exploration', day: 3 },
    { time: '2026-03-15T14:00:00+05:30', end: '2026-03-15T18:00:00+05:30', title: 'Drive back to Bhopal', day: 3 },
    { time: '2026-03-15T18:00:00+05:30', end: '2026-03-15T22:00:00+05:30', title: 'Arrive at IISER Bhopal', day: 3 }
  ];

  var el = document.getElementById('tripTracker');
  if (!el) return;

  function toDate(s) { return new Date(s); }
  var tripStart = toDate(TRIP_START);
  var tripEnd   = toDate(TRIP_END);

  function getState(now) {
    if (now < tripStart) return 'pre';
    if (now >= tripEnd) return 'post';
    return 'active';
  }

  function findCurrentAndNext(now) {
    var current = null, next = null;
    for (var i = 0; i < TRIP_EVENTS.length; i++) {
      var ev = TRIP_EVENTS[i];
      var start = toDate(ev.time);
      var end = toDate(ev.end);
      if (now >= start && now < end) {
        current = ev;
        next = TRIP_EVENTS[i + 1] || null;
        return { current: current, next: next };
      }
      if (now < start) {
        next = ev;
        return { current: null, next: next };
      }
    }
    return { current: TRIP_EVENTS[TRIP_EVENTS.length - 1], next: null };
  }

  function fmtTime(iso) {
    var d = toDate(iso);
    return d.toLocaleString('en-IN', { hour: 'numeric', minute: '2-digit', hour12: true, timeZone: 'Asia/Kolkata' });
  }

  function pad(n) { return n < 10 ? '0' + n : '' + n; }

  function countEventsCompleted(now) {
    var count = 0;
    for (var i = 0; i < TRIP_EVENTS.length; i++) {
      if (now >= toDate(TRIP_EVENTS[i].end)) count++;
    }
    return count;
  }

  function currentDay(now) {
    for (var i = TRIP_EVENTS.length - 1; i >= 0; i--) {
      if (now >= toDate(TRIP_EVENTS[i].time)) return TRIP_EVENTS[i].day;
    }
    return 1;
  }

  function renderPre(now) {
    var diff = tripStart - now;
    var days = Math.floor(diff / 86400000);
    var hrs  = Math.floor((diff % 86400000) / 3600000);
    var mins = Math.floor((diff % 3600000) / 60000);
    var secs = Math.floor((diff % 60000) / 1000);

    var firstEvent = TRIP_EVENTS[0];

    el.innerHTML =
      '<div class="tracker-label">TRIP STARTS IN</div>' +
      '<div class="tracker-countdown">' +
        '<div class="countdown-unit"><span class="countdown-value">' + pad(days) + '</span><span class="countdown-label">Days</span></div>' +
        '<span class="countdown-sep">:</span>' +
        '<div class="countdown-unit"><span class="countdown-value">' + pad(hrs) + '</span><span class="countdown-label">Hours</span></div>' +
        '<span class="countdown-sep">:</span>' +
        '<div class="countdown-unit"><span class="countdown-value">' + pad(mins) + '</span><span class="countdown-label">Mins</span></div>' +
        '<span class="countdown-sep">:</span>' +
        '<div class="countdown-unit"><span class="countdown-value">' + pad(secs) + '</span><span class="countdown-label">Secs</span></div>' +
      '</div>' +
      '<div class="tracker-hint">First up: ' + firstEvent.title + ' at ' + fmtTime(firstEvent.time) + '</div>';
  }

  function renderActive(now) {
    var info = findCurrentAndNext(now);
    var done = countEventsCompleted(now);
    var day  = currentDay(now);
    var pct  = Math.round((done / TRIP_EVENTS.length) * 100);

    var nowBlock = '';
    if (info.current) {
      nowBlock =
        '<div class="tracker-now">' +
          '<div class="tracker-label"><span class="tracker-pulse"></span>HAPPENING NOW</div>' +
          '<div class="tracker-now-title">' + info.current.title + '</div>' +
          '<div class="tracker-now-time">' + fmtTime(info.current.time) + ' ‚Äì ' + fmtTime(info.current.end) + '</div>' +
        '</div>';
    } else {
      nowBlock =
        '<div class="tracker-now">' +
          '<div class="tracker-label"><span class="tracker-pulse"></span>FREE TIME</div>' +
          '<div class="tracker-now-title">Chill & explore</div>' +
          '<div class="tracker-now-time">Between activities</div>' +
        '</div>';
    }

    var nextBlock = '';
    if (info.next) {
      nextBlock =
        '<div class="tracker-next">' +
          '<div class="tracker-label">UP NEXT</div>' +
          '<div class="tracker-next-title">' + info.next.title + '</div>' +
          '<div class="tracker-next-time">' + fmtTime(info.next.time) + '</div>' +
        '</div>';
    } else {
      nextBlock =
        '<div class="tracker-next">' +
          '<div class="tracker-label">UP NEXT</div>' +
          '<div class="tracker-next-title">Trip wrapping up!</div>' +
          '<div class="tracker-next-time">Heading home</div>' +
        '</div>';
    }

    el.innerHTML =
      '<div class="tracker-row">' +
        nowBlock +
        '<div class="tracker-divider"></div>' +
        nextBlock +
      '</div>' +
      '<div class="tracker-progress">' +
        '<div class="tracker-progress-label">Day ' + day + ' of 3 ‚Äî ' + done + ' of ' + TRIP_EVENTS.length + ' events done</div>' +
        '<div class="tracker-progress-bar"><div class="tracker-progress-fill" style="width:' + pct + '%"></div></div>' +
      '</div>';
  }

  function renderPost() {
    el.innerHTML =
      '<div class="tracker-label">TRIP COMPLETED</div>' +
      '<div class="tracker-done-msg">What a weekend that was.</div>' +
      '<div class="tracker-done-sub">Duchess Falls. Dhoopgarh sunset. Stars over Satpura. Until the next one.</div>';
  }

  function tick() {
    var now = new Date();
    var state = getState(now);
    if (state === 'pre') renderPre(now);
    else if (state === 'active') renderActive(now);
    else renderPost();
  }

  // ‚îÄ‚îÄ Timeline Progress Sync ‚îÄ‚îÄ
  function syncTimeline(now) {
    var items = document.querySelectorAll('[data-event-idx]');
    var state = getState(now);

    if (state !== 'active') {
      items.forEach(function(el) {
        el.classList.remove('is-current', 'is-past');
      });
      return;
    }

    var info = findCurrentAndNext(now);
    var currentIdx = -1;
    if (info.current) {
      currentIdx = TRIP_EVENTS.indexOf(info.current);
    } else if (info.next) {
      currentIdx = TRIP_EVENTS.indexOf(info.next) - 1;
    }

    items.forEach(function(el) {
      var idx = parseInt(el.getAttribute('data-event-idx'), 10);
      el.classList.remove('is-current', 'is-past');
      if (idx < currentIdx) {
        el.classList.add('is-past');
      } else if (idx === currentIdx) {
        el.classList.add('is-current');
        // Auto-expand collapsed section
        var section = el.closest('.day-section');
        if (section && section.classList.contains('collapsed')) {
          section.classList.remove('collapsed');
          var toggle = section.querySelector('.day-toggle');
          if (toggle) toggle.setAttribute('aria-expanded', 'true');
        }
      }
    });
  }

  function tickWithSync() {
    var now = new Date();
    var state = getState(now);
    if (state === 'pre') renderPre(now);
    else if (state === 'active') renderActive(now);
    else renderPost();
    syncTimeline(now);
  }

  tickWithSync();

  var state = getState(new Date());
  var timerId = setInterval(function() {
    var newState = getState(new Date());
    tickWithSync();
    if (newState !== state) {
      clearInterval(timerId);
      state = newState;
      timerId = setInterval(tickWithSync, newState === 'pre' ? 1000 : 60000);
    }
  }, state === 'pre' ? 1000 : 60000);
})();
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
<script>
(function() {
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HELPERS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

  function addSpot(map, latlng, num, name, time, color, isStar, popupHtml, labelDir) {
    var sz = isStar ? [36, 36] : [32, 32];
    var cls = 'numbered-marker' + (isStar ? ' star-marker' : '');

    var icon = L.divIcon({
      className: '',
      html: '<div class="' + cls + '" style="background:' + color + ';">' + num + '</div>',
      iconSize: sz,
      iconAnchor: [sz[0] / 2, sz[1] / 2]
    });

    var marker = L.marker(latlng, { icon: icon, zIndexOffset: isStar ? 1000 : 0 }).addTo(map);

    if (popupHtml) marker.bindPopup(popupHtml, { maxWidth: 260 });

    var dir = labelDir || 'right';
    var offsets = { right: [14, 0], left: [-14, 0], top: [0, -18], bottom: [0, 18] };
    var labelHtml = '<span class="label-time">' + time + '</span><span class="label-name">' + name + '</span>';
    marker.bindTooltip(labelHtml, {
      permanent: true,
      direction: dir,
      className: 'spot-label',
      offset: offsets[dir] || [14, 0]
    });

    return marker;
  }

  // Haversine distance (km) between two [lat, lng] points
  function haversineKm(a, b) {
    var R = 6371;
    var dLat = (b[0] - a[0]) * Math.PI / 180;
    var dLon = (b[1] - a[1]) * Math.PI / 180;
    var la = a[0] * Math.PI / 180;
    var lb = b[0] * Math.PI / 180;
    var h = Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(la) * Math.cos(lb) * Math.sin(dLon/2) * Math.sin(dLon/2);
    return R * 2 * Math.atan2(Math.sqrt(h), Math.sqrt(1 - h));
  }

  // Road-distance overrides (key = "lat1,lng1>lat2,lng2", value = km)
  // These override haversine for segments where roads are much longer than straight-line
  var roadDistances = {};
  function rdKey(a, b) { return a[0]+','+a[1]+'>'+b[0]+','+b[1]; }

  // Friday overrides (real road distances)
  roadDistances[rdKey([23.2865,77.4070],[22.7639,78.3513])] = 150;   // IISER ‚Üí Pipariya
  roadDistances[rdKey([22.7639,78.3513],[22.6100,78.3900])] = 25;    // Pipariya ‚Üí Ghat midpoint
  roadDistances[rdKey([22.6100,78.3900],[22.4679,78.4321])] = 25;    // Ghat midpoint ‚Üí Chunmun
  roadDistances[rdKey([22.4679,78.4321],[22.4680,78.4350])] = 0.5;   // Chunmun ‚Üí Market

  // Saturday overrides
  roadDistances[rdKey([22.4679,78.4321],[22.4720,78.4360])] = 0.6;   // Cottage ‚Üí Bison Lodge
  roadDistances[rdKey([22.4720,78.4360],[22.4100,78.5100])] = 15;    // Bison Lodge ‚Üí Duchess Falls
  roadDistances[rdKey([22.4100,78.5100],[22.4610,78.4300])] = 12;    // Duchess ‚Üí Bee Falls
  roadDistances[rdKey([22.4610,78.4300],[22.4685,78.4350])] = 1;     // Bee Falls ‚Üí Lunch
  roadDistances[rdKey([22.4685,78.4350],[22.4535,78.4200])] = 3;     // Lunch ‚Üí Jata Shankar
  roadDistances[rdKey([22.4535,78.4200],[22.4370,78.4098])] = 3;     // Jata Shankar ‚Üí Bada Mahadev
  roadDistances[rdKey([22.4370,78.4098],[22.4480,78.3830])] = 5;     // Bada Mahadev ‚Üí Dhoopgarh
  roadDistances[rdKey([22.4480,78.3830],[22.4690,78.4380])] = 8;     // Dhoopgarh ‚Üí Beta Bawarchi
  roadDistances[rdKey([22.4690,78.4380],[22.4676,78.4355])] = 0.3;   // Beta Bawarchi ‚Üí Market

  // Sunday overrides
  roadDistances[rdKey([22.4679,78.4321],[22.3900,78.4800])] = 14;    // Cottage ‚Üí Snorkeling trek
  roadDistances[rdKey([22.3900,78.4800],[22.4675,78.4345])] = 14;    // Snorkeling ‚Üí Lunch
  roadDistances[rdKey([22.4675,78.4345],[22.4550,78.4050])] = 4;     // Lunch ‚Üí Reechgarh
  roadDistances[rdKey([22.4550,78.4050],[22.4780,78.4120])] = 4;     // Reechgarh ‚Üí Priyadarshini
  roadDistances[rdKey([22.4780,78.4120],[22.4667,78.4333])] = 3;     // Priyadarshini ‚Üí Pachmarhi center
  roadDistances[rdKey([22.4667,78.4333],[22.7639,78.3513])] = 50;    // Pachmarhi ‚Üí Pipariya
  roadDistances[rdKey([22.7639,78.3513],[23.2865,77.4070])] = 150;   // Pipariya ‚Üí IISER

  function getRoadDist(a, b) {
    var key = rdKey(a, b);
    if (roadDistances[key] !== undefined) return roadDistances[key];
    // For short local distances, multiply haversine by ~1.3 road factor
    var straight = haversineKm(a, b);
    return straight < 5 ? Math.round(straight * 1.3 * 10) / 10 : Math.round(straight * 1.25);
  }

  function addArrowedRoute(map, points, color) {
    L.polyline(points, { color: color, weight: 4, opacity: 0.75 }).addTo(map);

    for (var i = 0; i < points.length - 1; i++) {
      var from = points[i], to = points[i + 1];
      var midLat = (from[0] + to[0]) / 2;
      var midLng = (from[1] + to[1]) / 2;

      // Bearing for arrow
      var dLng = (to[1] - from[1]) * Math.PI / 180;
      var lat1 = from[0] * Math.PI / 180;
      var lat2 = to[0] * Math.PI / 180;
      var y = Math.sin(dLng) * Math.cos(lat2);
      var x = Math.cos(lat1) * Math.sin(lat2) - Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLng);
      var bearing = Math.atan2(y, x) * 180 / Math.PI;

      // Arrow marker
      var arrowIcon = L.divIcon({
        className: 'arrow-icon',
        html: '<svg width="24" height="24" viewBox="0 0 24 24" style="transform:rotate(' + bearing + 'deg);filter:drop-shadow(0 1px 2px rgba(0,0,0,0.3));">' +
              '<polygon points="12,2 22,18 12,14 2,18" fill="' + color + '" stroke="white" stroke-width="1.5"/></svg>',
        iconSize: [24, 24],
        iconAnchor: [12, 12]
      });

      L.marker([midLat, midLng], { icon: arrowIcon, interactive: false }).addTo(map);

      // Distance label ‚Äî offset slightly from the arrow so they don't overlap
      var dist = getRoadDist(from, to);
      var distText = dist < 1 ? (Math.round(dist * 1000)) + ' m' : (dist % 1 === 0 ? dist : dist.toFixed(1)) + ' km';

      // Offset the label perpendicular to the route to avoid overlapping the arrow
      var perpOffset = 0.006;
      var segAngle = Math.atan2(to[0] - from[0], to[1] - from[1]);
      var labelLat = midLat + perpOffset * Math.cos(segAngle + Math.PI / 2);
      var labelLng = midLng - perpOffset * Math.sin(segAngle + Math.PI / 2);

      var distMarker = L.marker([labelLat, labelLng], {
        icon: L.divIcon({ className: '', html: '', iconSize: [0, 0] }),
        interactive: false
      }).addTo(map);

      distMarker.bindTooltip(distText, {
        permanent: true,
        direction: 'center',
        className: 'dist-label',
        offset: [0, 0]
      });
    }
  }

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê COORDINATES ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  var loc = {
    iiserBhopal:       [23.2865, 77.4070],
    pipariya:          [22.7639, 78.3513],
    ghatMidpoint:      [22.6100, 78.3900],
    pachmarhi:         [22.4667, 78.4333],
    chunmunCottage:    [22.4679, 78.4321],
    pachmarhibazaar:   [22.4680, 78.4350],
    bisonLodge:        [22.4720, 78.4360],
    duchessFalls:      [22.4100, 78.5100],
    beeFalls:          [22.4610, 78.4300],
    jataShankarCaves:  [22.4535, 78.4200],
    badaMahadev:       [22.4370, 78.4098],
    guptMahadev:       [22.4395, 78.4140],
    dhoopgarh:         [22.4480, 78.3830],
    betaBawarchi:      [22.4690, 78.4380],
    snorkelingTrek:    [22.3900, 78.4800],
    reechgarh:         [22.4550, 78.4050],
    priyadarshiniPoint:[22.4780, 78.4120]
  };

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  //  FRIDAY MAP
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  var mapFriday = L.map('mapFriday', { scrollWheelZoom: true }).setView([22.9, 78.0], 9);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors', maxZoom: 18
  }).addTo(mapFriday);

  var fridayStops = [
    { pos: loc.iiserBhopal,     num: 1, name: 'IISER Bhopal',            time: '12:30 PM',  color: '#4CAF50', star: false, dir: 'right',
      popup: '<h3>1. IISER Bhopal (Bhauri)</h3><p><b>12:30 PM</b> ‚Äî Assemble, load luggage.<br>Cash, offline maps, photo ID, trekking shoes.</p>' },
    { pos: loc.pipariya,        num: 2, name: 'Pipariya (chai stop)',     time: '~3:30 PM',  color: '#d4913b', star: false, dir: 'left',
      popup: '<h3>2. Pipariya ‚Äî Chai Break</h3><p><b>~3:30 PM</b> ‚Äî Last stop before ghat road.<br>Snacks, restrooms, ATMs.</p>' },
    { pos: loc.ghatMidpoint,    num: 3, name: 'Satpura Ghat Road',       time: '4‚Äì5:30 PM', color: '#2d5a3f', star: true, dir: 'right',
      popup: '<h3>3. Satpura Ghat Road</h3><p><b>4:00‚Äì5:30 PM</b> ‚Äî 50 km scenic hairpin bends.<br>Dense sal & teak forest. Speed &lt;40 km/h.</p>' },
    { pos: loc.chunmunCottage,  num: 4, name: 'Chunmun Cottage',         time: '~6:00 PM',  color: '#FF5722', star: false, dir: 'right',
      popup: '<h3>4. Chunmun Cottage</h3><p><b>~5:30‚Äì6:00 PM</b> ‚Äî Check in, dormitory.<br>500m from market, campfire area.</p>' },
    { pos: loc.pachmarhibazaar,  num: 5, name: 'Market + Dinner',        time: '6:30‚Äì8 PM', color: '#7a5230', star: false, dir: 'bottom',
      popup: '<h3>5. Pachmarhi Market</h3><p><b>6:30‚Äì8:00 PM</b> ‚Äî Jalaram Bhojnalaya (‚Çπ100‚Äì150 thali) or Maheshwari Restaurant.<br>Handicrafts, honey, banana silk.</p>' }
  ];

  fridayStops.forEach(function(s) {
    addSpot(mapFriday, s.pos, s.num, s.name, s.time, s.color, s.star, s.popup, s.dir);
  });

  addArrowedRoute(mapFriday,
    [loc.iiserBhopal, loc.pipariya, loc.ghatMidpoint, loc.chunmunCottage, loc.pachmarhibazaar],
    '#2d5a3f'
  );

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  //  SATURDAY MAP
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  var mapSaturday = L.map('mapSaturday', { scrollWheelZoom: true }).setView([22.455, 78.43], 12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors', maxZoom: 18
  }).addTo(mapSaturday);

  var saturdayStops = [
    { pos: loc.chunmunCottage,  num: 1,  name: 'Chunmun Cottage',          time: '7:00 AM',        color: '#4CAF50', star: false, dir: 'right',
      popup: '<h3>1. Chunmun Cottage (Base)</h3><p><b>7:00 AM</b> ‚Äî Breakfast at Maheshwari Restaurant.<br>Poha-jalebi, ‚Çπ80‚Äì100.</p>' },
    { pos: loc.bisonLodge,      num: 2,  name: 'Bison Lodge (Permits)',     time: '8:00 AM',        color: '#c45a3c', star: true, dir: 'top',
      popup: '<h3>2. Bison Lodge Museum</h3><p><b>8:00 AM SHARP</b> ‚Äî Permits ‚Çπ660/person + book 2 gypsies.<br>Most critical moment of the trip!</p>' },
    { pos: loc.duchessFalls,    num: 3,  name: 'Duchess Falls Trek',        time: '9 AM‚Äì12:30 PM',  color: '#d4913b', star: true, dir: 'right',
      popup: '<h3>3. Duchess Falls</h3><p><b>9:00 AM‚Äì12:30 PM</b> ‚Äî 4‚Äì5 km trek, 100m waterfall, 3 cascades.<br>Natural pools, "doctor fish." 100% voted!</p>' },
    { pos: loc.beeFalls,        num: 4,  name: 'Bee Falls (optional)',      time: '~12:30 PM',      color: '#7a7a7a', star: false, dir: 'right',
      popup: '<h3>4. Bee Falls</h3><p><b>12:30‚Äì1:00 PM</b> ‚Äî 35m waterfall. 400+ steps.<br>Skip descent if legs are done.</p>' },
    { pos: [22.4685, 78.4350],  num: 5,  name: 'Lunch in Town',             time: '1:00‚Äì2:15 PM',   color: '#7a5230', star: false, dir: 'bottom',
      popup: '<h3>5. Lunch</h3><p><b>1:00‚Äì2:15 PM</b> ‚Äî Jalaram Bhojnalaya: unlimited thali ‚Çπ100‚Äì150.<br>Or Bombay Hotel for non-veg ‚Çπ100‚Äì250.</p>' },
    { pos: loc.jataShankarCaves, num: 6, name: 'Jata Shankar Caves',       time: '2:30‚Äì3:30 PM',   color: '#5b93b0', star: false, dir: 'left',
      popup: '<h3>6. Jata Shankar + Harper\'s Cave</h3><p><b>2:30‚Äì3:30 PM</b> ‚Äî Natural stalagmite Shivalingams.<br>10,000-year-old rock painting. Force Traveller.</p>' },
    { pos: loc.badaMahadev,     num: 7,  name: 'Bada + Gupt Mahadev',      time: '3:45‚Äì5:00 PM',   color: '#5b93b0', star: false, dir: 'left',
      popup: '<h3>7. Bada + Gupt Mahadev</h3><p><b>3:45‚Äì5:00 PM</b> ‚Äî 60-foot cave shrine, dripping water.<br>Gupt Mahadev: narrow fissure in darkness. Flashlight!</p>' },
    { pos: loc.dhoopgarh,       num: 8,  name: 'Dhoopgarh Sunset (1,352m)', time: '5:15‚Äì7:00 PM',  color: '#d4913b', star: true, dir: 'left',
      popup: '<h3>8. Dhoopgarh Sunset</h3><p><b>5:15‚Äì7:00 PM</b> ‚Äî MP\'s highest point, 1,352m.<br>360¬∞ sunset over Satpura & Vindhya.<br>Monkeys aggressive ‚Äî bags zipped!</p>' },
    { pos: loc.betaBawarchi,    num: 9,  name: 'Beta Bawarchi (Dinner)',    time: '7:30‚Äì9:00 PM',   color: '#FF5722', star: false, dir: 'right',
      popup: '<h3>9. Beta Bawarchi</h3><p><b>7:30‚Äì9:00 PM</b> ‚Äî Open-air garden, live unplugged music.<br>Paneer Angara, Dal Dhaba. ‚Çπ250‚Äì500. 75% voted.</p>' },
    { pos: [22.4676, 78.4355],  num: 10, name: 'Market Stroll',             time: '9:00‚Äì10 PM',    color: '#7a5230', star: false, dir: 'left',
      popup: '<h3>10. Market Stroll</h3><p><b>9:00‚Äì10:00 PM</b> ‚Äî Maggi, chaat, dosa ‚Çπ50.<br>Souvenirs, cash-only. 62.5% voted.</p>' }
  ];

  saturdayStops.forEach(function(s) {
    addSpot(mapSaturday, s.pos, s.num, s.name, s.time, s.color, s.star, s.popup, s.dir);
  });

  addArrowedRoute(mapSaturday,
    [loc.chunmunCottage, loc.bisonLodge, loc.duchessFalls, loc.beeFalls, [22.4685, 78.4350],
     loc.jataShankarCaves, loc.badaMahadev, loc.dhoopgarh, loc.betaBawarchi, [22.4676, 78.4355]],
    '#d4913b'
  );

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  //  SUNDAY MAP
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  var mapSunday = L.map('mapSunday', { scrollWheelZoom: true }).setView([22.75, 78.2], 9);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors', maxZoom: 18
  }).addTo(mapSunday);

  var sundayStops = [
    { pos: loc.chunmunCottage,     num: 1, name: 'Chunmun Cottage (Pack up)', time: '7:00 AM',       color: '#4CAF50', star: false, dir: 'right',
      popup: '<h3>1. Chunmun Cottage</h3><p><b>7:00 AM</b> ‚Äî Breakfast + check out.<br>Pack bags into Force Traveller.</p>' },
    { pos: loc.snorkelingTrek,     num: 2, name: 'Snorkeling Trek (TGA)',      time: '8 AM‚Äì12:30 PM', color: '#d4913b', star: true, dir: 'right',
      popup: '<h3>2. Snorkeling Trek</h3><p><b>8:00 AM‚Äì12:30 PM</b> ‚Äî The Gypsy Adventures. 87.5% voted!<br>Jungle trek + freshwater snorkeling in rock pool.<br>‚Çπ1,500/person. Book: +91 92055 15652</p>' },
    { pos: [22.4675, 78.4345],     num: 3, name: 'Lunch in Town',              time: '12:30‚Äì1:30 PM', color: '#7a5230', star: false, dir: 'right',
      popup: '<h3>3. Quick Lunch</h3><p><b>12:30‚Äì1:30 PM</b> ‚Äî Dine Inn Food Court (4.7 rated).<br>Or Rahul\'s Pizza. Eat fast!</p>' },
    { pos: loc.reechgarh,          num: 4, name: 'Reechgarh (Natural Canyon)', time: '1:45‚Äì2:45 PM',  color: '#d4913b', star: true, dir: 'left',
      popup: '<h3>4. Reechgarh</h3><p><b>1:45‚Äì2:45 PM</b> ‚Äî 400m narrow canyon, "natural AC."<br>2,000-year-old water-erosion patterns. 100% voted!</p>' },
    { pos: loc.priyadarshiniPoint, num: 5, name: 'Priyadarshini Point',        time: '3:00‚Äì3:40 PM',  color: '#5b93b0', star: false, dir: 'left',
      popup: '<h3>5. Priyadarshini Point</h3><p><b>3:00‚Äì3:40 PM</b> ‚Äî Forsyth\'s discovery spot (1857).<br>Panoramic view, group photos.</p>' },
    { pos: loc.pachmarhi,          num: 6, name: 'Depart Pachmarhi',            time: '4:30 PM',       color: '#c45a3c', star: false, dir: 'right',
      popup: '<h3>6. Depart Pachmarhi</h3><p><b>4:30 PM</b> ‚Äî 5-hour return drive.<br>Scenic ghat road descent in daylight.</p>' },
    { pos: loc.pipariya,           num: 7, name: 'Pipariya (Highway)',          time: '~6:00 PM',      color: '#7a7a7a', star: false, dir: 'left',
      popup: '<h3>7. Pipariya</h3><p><b>~6:00 PM</b> ‚Äî Rejoin smooth four-lane highway.<br>150 km remaining to Bhopal.</p>' },
    { pos: loc.iiserBhopal,        num: 8, name: 'IISER Bhopal (Home!)',       time: '~9:30 PM',      color: '#FF5722', star: false, dir: 'right',
      popup: '<h3>8. IISER Bhopal</h3><p><b>~9:30‚Äì10:00 PM</b> ‚Äî Home.<br>Tired, sunburnt, worth every step.</p>' }
  ];

  sundayStops.forEach(function(s) {
    addSpot(mapSunday, s.pos, s.num, s.name, s.time, s.color, s.star, s.popup, s.dir);
  });

  addArrowedRoute(mapSunday,
    [loc.chunmunCottage, loc.snorkelingTrek, [22.4675, 78.4345], loc.reechgarh,
     loc.priyadarshiniPoint, loc.pachmarhi, loc.pipariya, loc.iiserBhopal],
    '#5b93b0'
  );
})();
</script>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê POLL RESULTS SCRIPT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
(function() {
  var CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQF6_irYj5Rezz1Qh3dBh-1v5QwFdHwogFL6pLxE5jqk0yZgxKe-bhQ1FLkYSOPzlQdnhQpC8dvsO5d/pub?output=csv';

  function parseCSV(text) {
    var rows = [];
    var row = [];
    var field = '';
    var inQuotes = false;
    for (var i = 0; i < text.length; i++) {
      var c = text[i];
      if (inQuotes) {
        if (c === '"' && text[i + 1] === '"') { field += '"'; i++; }
        else if (c === '"') { inQuotes = false; }
        else { field += c; }
      } else {
        if (c === '"') { inQuotes = true; }
        else if (c === ',') { row.push(field); field = ''; }
        else if (c === '\n' || (c === '\r' && text[i + 1] === '\n')) {
          row.push(field); field = '';
          if (c === '\r') i++;
          rows.push(row); row = [];
        } else { field += c; }
      }
    }
    if (field || row.length) { row.push(field); rows.push(row); }
    return rows;
  }

  function shortName(val) {
    val = val.trim();
    // Extract text before ' ‚Äî ' (em dash with spaces)
    var dash = val.indexOf(' ‚Äî ');
    if (dash !== -1) val = val.substring(0, dash).trim();
    // Strip trailing incomplete parenthetical like "(675m" or "(earliest"
    val = val.replace(/\s*\([^)]*$/, '').trim();
    // If still long, truncate
    return val.length > 45 ? val.substring(0, 42) + '‚Ä¶' : val;
  }

  function splitMulti(val) {
    if (!val || !val.trim()) return [];
    // Only split on ', ' followed by an emoji ‚Äî never on plain text commas
    return val.split(/,\s*(?=[\u{1F300}-\u{1FAFF}\u{2600}-\u{27BF}\u{FE00}-\u{FE0F}\u{1F900}-\u{1F9FF}\u{2702}-\u{27B0}])/u)
      .map(function(p) { return p.trim(); }).filter(Boolean);
  }

  function aggregate(values) {
    var counts = {};
    values.forEach(function(v) {
      // Aggregate by short name so duplicates with same prefix merge
      var key = shortName(v);
      if (!key) return;
      counts[key] = (counts[key] || 0) + 1;
    });
    return Object.keys(counts).map(function(k) {
      return { label: k, count: counts[k] };
    }).sort(function(a, b) { return b.count - a.count; });
  }

  var COLORS = ['#2d5a3f', '#d4913b', '#5b93b0', '#c45a3c', '#7fa97f', '#8b6ec7', '#e07b9a', '#4a9ca6'];

  function renderBarChart(items, total) {
    var html = '';
    items.forEach(function(item, i) {
      var pct = Math.round((item.count / total) * 100);
      var color = COLORS[i % COLORS.length];
      html += '<div class="poll-bar-row">';
      html += '<span class="poll-bar-label" title="' + item.label.replace(/"/g, '&quot;') + '">' + item.label + '</span>';
      html += '<div class="poll-bar-track"><div class="poll-bar-fill" style="width:' + pct + '%;background:' + color + '"></div></div>';
      html += '<span class="poll-bar-value">' + item.count + ' (' + pct + '%)</span>';
      html += '</div>';
    });
    return html;
  }

  var QUESTIONS = [
    { col: 3,  title: 'Trip Confirmation', multi: false },
    { col: 4,  title: 'Departure Time from IISER', multi: false },
    { col: 6,  title: 'Budget Per Night (Accommodation)', multi: false },
    { col: 7,  title: 'Most Wanted Places to Visit', multi: true },
    { col: 8,  title: 'Saturday Evening Plans', multi: false },
    { col: 9,  title: 'Sunday Morning Preference', multi: false },
    { col: 10, title: 'Fitness Rating (1‚Äì5)', multi: false },
    { col: 11, title: 'Adventure Activities Interest', multi: true },
    { col: 12, title: 'Dietary Preference', multi: false },
    { col: 13, title: 'Restaurant Preferences', multi: true },
    { col: 14, title: 'Total Trip Budget', multi: false }
  ];

  fetch(CSV_URL)
    .then(function(r) { return r.text(); })
    .then(function(text) {
      var parsed = parseCSV(text);
      if (parsed.length < 2) {
        document.getElementById('pollResults').innerHTML = '<p style="text-align:center;color:var(--slate-light);">No responses yet.</p>';
        return;
      }
      var dataRows = parsed.slice(1);
      var total = dataRows.length;
      var confirmed = dataRows.filter(function(r) { return r[3] && r[3].indexOf('Yes') !== -1; }).length;

      var html = '';
      html += '<div class="poll-stat-row">';
      html += '<div class="poll-stat"><div class="big">' + total + '</div><div class="small">Total Responses</div></div>';
      html += '<div class="poll-stat"><div class="big">' + confirmed + '</div><div class="small">Confirmed</div></div>';
      html += '<div class="poll-stat"><div class="big">' + (total - confirmed) + '</div><div class="small">Can\'t Make It</div></div>';
      html += '</div>';

      html += '<div class="poll-grid">';
      QUESTIONS.forEach(function(q) {
        var allValues = [];
        dataRows.forEach(function(row) {
          var val = row[q.col] || '';
          if (q.multi) {
            splitMulti(val).forEach(function(v) { allValues.push(v); });
          } else {
            if (val.trim()) allValues.push(val.trim());
          }
        });
        var items = aggregate(allValues);
        if (items.length === 0) return;
        html += '<div class="poll-card">';
        html += '<h3>' + q.title + '</h3>';
        html += renderBarChart(items, q.multi ? dataRows.length : total);
        html += '</div>';
      });
      html += '</div>';

      document.getElementById('pollResults').innerHTML = html;
    })
    .catch(function(err) {
      console.error('Poll fetch error:', err);
      document.getElementById('pollResults').innerHTML = '<p style="text-align:center;color:var(--rust);">Could not load poll results. Try refreshing.</p>';
    });
})();
</script>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê COLLAPSIBLE SECTIONS SCRIPT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
function toggleDay(el) {
  var section = el.closest('.day-section');
  if (!section) return;
  var isCollapsed = section.classList.toggle('collapsed');
  el.setAttribute('aria-expanded', isCollapsed ? 'false' : 'true');
}
</script>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê DARK MODE SCRIPT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
function toggleDarkMode() {
  var isDark = document.body.classList.toggle('dark');
  localStorage.setItem('pachmarhi-dark-mode', isDark ? '1' : '0');
  var btn = document.querySelector('.dark-mode-btn');
  if (btn) btn.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
}
(function() {
  if (localStorage.getItem('pachmarhi-dark-mode') === '1') {
    document.body.classList.add('dark');
    var btn = document.querySelector('.dark-mode-btn');
    if (btn) btn.textContent = '‚òÄÔ∏è';
  }
})();
</script>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê WEATHER WIDGET SCRIPT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
(function() {
  var WMO_MAP = {
    0: ['‚òÄÔ∏è', 'Clear sky'],
    1: ['üå§', 'Mostly clear'], 2: ['‚õÖ', 'Partly cloudy'], 3: ['‚òÅÔ∏è', 'Overcast'],
    45: ['üå´', 'Foggy'], 48: ['üå´', 'Depositing rime fog'],
    51: ['üå¶', 'Light drizzle'], 53: ['üå¶', 'Moderate drizzle'], 55: ['üåß', 'Dense drizzle'],
    56: ['üåß', 'Light freezing drizzle'], 57: ['üåß', 'Dense freezing drizzle'],
    61: ['üåß', 'Slight rain'], 63: ['üåß', 'Moderate rain'], 65: ['üåß', 'Heavy rain'],
    66: ['üåß', 'Light freezing rain'], 67: ['üåß', 'Heavy freezing rain'],
    71: ['üå®', 'Slight snow'], 73: ['üå®', 'Moderate snow'], 75: ['‚ùÑÔ∏è', 'Heavy snow'],
    77: ['üå®', 'Snow grains'],
    80: ['üå¶', 'Slight rain showers'], 81: ['üåß', 'Moderate rain showers'], 82: ['‚õà', 'Violent rain showers'],
    85: ['üå®', 'Slight snow showers'], 86: ['üå®', 'Heavy snow showers'],
    95: ['‚õà', 'Thunderstorm'], 96: ['‚õà', 'Thunderstorm with slight hail'], 99: ['‚õà', 'Thunderstorm with heavy hail']
  };

  function getWmo(code) {
    return WMO_MAP[code] || ['üå°', 'Unknown'];
  }

  function formatDate(dateStr) {
    var d = new Date(dateStr + 'T00:00:00');
    return d.toLocaleDateString('en-IN', { weekday: 'short', month: 'short', day: 'numeric' });
  }

  function renderCards(days) {
    var grid = document.getElementById('weatherGrid');
    if (!grid) return;
    var html = '';
    days.forEach(function(day) {
      html += '<div class="weather-card">';
      html += '<div class="weather-date">' + day.date + '</div>';
      html += '<div class="weather-icon">' + day.icon + '</div>';
      html += '<div class="weather-condition">' + day.condition + '</div>';
      html += '<div class="weather-temps">' + Math.round(day.high) + '¬∞ <span class="low">/ ' + Math.round(day.low) + '¬∞</span></div>';
      html += '<div class="weather-rain">üíß ' + day.rain + '% chance of rain</div>';
      html += '</div>';
    });
    grid.innerHTML = html;
  }

  function fallback() {
    renderCards([
      { date: 'Fri, Mar 13', icon: '‚òÄÔ∏è', condition: 'Mostly sunny', high: 35, low: 15, rain: 10 },
      { date: 'Sat, Mar 14', icon: 'üå§', condition: 'Partly cloudy', high: 34, low: 16, rain: 15 },
      { date: 'Sun, Mar 15', icon: '‚òÄÔ∏è', condition: 'Clear sky', high: 35, low: 15, rain: 5 }
    ]);
    var title = document.querySelector('.weather-title');
    if (title) title.textContent = '3-DAY FORECAST ‚Äî PACHMARHI (APPROXIMATE)';
  }

  fetch('https://api.open-meteo.com/v1/forecast?latitude=22.4679&longitude=78.4321&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max,weather_code&forecast_days=3&timezone=Asia%2FKolkata')
    .then(function(r) { return r.json(); })
    .then(function(data) {
      if (!data.daily || !data.daily.time) { fallback(); return; }
      var days = [];
      for (var i = 0; i < data.daily.time.length && i < 3; i++) {
        var wmo = getWmo(data.daily.weather_code[i]);
        days.push({
          date: formatDate(data.daily.time[i]),
          icon: wmo[0],
          condition: wmo[1],
          high: data.daily.temperature_2m_max[i],
          low: data.daily.temperature_2m_min[i],
          rain: data.daily.precipitation_probability_max[i] || 0
        });
      }
      renderCards(days);
    })
    .catch(function() { fallback(); });
})();
</script>

</body>
</html>
